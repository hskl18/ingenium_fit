<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.mgkf.mapper.DoctorWorkExperienceMapper">
    
    <resultMap type="DoctorWorkExperience" id="DoctorWorkExperienceResult">
        <result property="id"    column="id"    />
        <result property="delFlag"    column="del_flag"    />
        <result property="createDept"    column="create_dept"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="doctorId"    column="doctor_id"    />
        <result property="startTime"    column="start_time"    />
        <result property="endTime"    column="end_time"    />
        <result property="positionZh"    column="position_zh"    />
        <result property="positionEn"    column="position_en"    />
        <result property="contentZh"    column="content_zh"    />
        <result property="contentEn"    column="content_en"    />
    </resultMap>

    <sql id="selectDoctorWorkExperienceVo">
        select id, del_flag, create_dept, create_by, create_time, update_by, update_time, doctor_id, start_time, end_time, position_zh, position_en, content_zh, content_en from t_doctor_work_experience
    </sql>

    <select id="selectDoctorWorkExperienceList" parameterType="DoctorWorkExperience" resultMap="DoctorWorkExperienceResult">
        <include refid="selectDoctorWorkExperienceVo"/>
        <where>  
            <if test="delFlag != null "> and del_flag = #{delFlag}</if>
            <if test="delFlag == null "> and del_flag != 2</if>
            <if test="doctorId != null "> and doctor_id = #{doctorId}</if>
            <if test="startTime != null  and startTime != ''"> and start_time = #{startTime}</if>
            <if test="endTime != null  and endTime != ''"> and end_time = #{endTime}</if>
            <if test="positionZh != null  and positionZh != ''"> and position_zh = #{positionZh}</if>
            <if test="positionEn != null  and positionEn != ''"> and position_en = #{positionEn}</if>
            <if test="contentZh != null  and contentZh != ''"> and content_zh = #{contentZh}</if>
            <if test="contentEn != null  and contentEn != ''"> and content_en = #{contentEn}</if>
            <if test="doctorIdList != null and doctorIdList.size() > 0">
                and doctor_id in
                <foreach item="item" collection="doctorIdList" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
        </where>
        order by create_time desc
    </select>
    
    <select id="selectDoctorWorkExperienceById" parameterType="Long" resultMap="DoctorWorkExperienceResult">
        <include refid="selectDoctorWorkExperienceVo"/>
        where id = #{id}
    </select>

    <insert id="insertDoctorWorkExperience" parameterType="DoctorWorkExperience" useGeneratedKeys="true" keyProperty="id">
        insert into t_doctor_work_experience
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="delFlag != null">del_flag,</if>
            <if test="createDept != null">create_dept,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="doctorId != null">doctor_id,</if>
            <if test="startTime != null">start_time,</if>
            <if test="endTime != null">end_time,</if>
            <if test="positionZh != null">position_zh,</if>
            <if test="positionEn != null">position_en,</if>
            <if test="contentZh != null">content_zh,</if>
            <if test="contentEn != null">content_en,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="delFlag != null">#{delFlag},</if>
            <if test="createDept != null">#{createDept},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="doctorId != null">#{doctorId},</if>
            <if test="startTime != null">#{startTime},</if>
            <if test="endTime != null">#{endTime},</if>
            <if test="positionZh != null">#{positionZh},</if>
            <if test="positionEn != null">#{positionEn},</if>
            <if test="contentZh != null">#{contentZh},</if>
            <if test="contentEn != null">#{contentEn},</if>
         </trim>
    </insert>

    <insert id="insertBatch" parameterType="DoctorWorkExperience" useGeneratedKeys="true" keyProperty="id">
        insert into t_doctor_work_experience
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="list != null and list.size() > 0">
                <if test="list[0].delFlag != null">del_flag,</if>
                <if test="list[0].createDept != null">create_dept,</if>
                <if test="list[0].createBy != null">create_by,</if>
                <if test="list[0].createTime != null">create_time,</if>
                <if test="list[0].updateBy != null">update_by,</if>
                <if test="list[0].updateTime != null">update_time,</if>
                <if test="list[0].doctorId != null">doctor_id,</if>
                <if test="list[0].startTime != null">start_time,</if>
                <if test="list[0].endTime != null">end_time,</if>
                <if test="list[0].positionZh != null">position_zh,</if>
                <if test="list[0].positionEn != null">position_en,</if>
                <if test="list[0].contentZh != null">content_zh,</if>
                <if test="list[0].contentEn != null">content_en,</if>
            </if>
        </trim>
        values
        <foreach collection="list" item="item" separator=",">
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="item.delFlag != null">#{item.delFlag},</if>
                <if test="item.createDept != null">#{item.createDept},</if>
                <if test="item.createBy != null">#{item.createBy},</if>
                <if test="item.createTime != null">#{item.createTime},</if>
                <if test="item.updateBy != null">#{item.updateBy},</if>
                <if test="item.updateTime != null">#{item.updateTime},</if>
                <if test="item.doctorId != null">#{item.doctorId},</if>
                <if test="item.startTime != null">#{item.startTime},</if>
                <if test="item.endTime != null">#{item.endTime},</if>
                <if test="item.positionZh != null">#{item.positionZh},</if>
                <if test="item.positionEn != null">#{item.positionEn},</if>
                <if test="item.contentZh != null">#{item.contentZh},</if>
                <if test="item.contentEn != null">#{item.contentEn},</if>
            </trim>
        </foreach>
    </insert>

    <update id="updateDoctorWorkExperience" parameterType="DoctorWorkExperience">
        update t_doctor_work_experience
        <trim prefix="SET" suffixOverrides=",">
            <if test="delFlag != null">del_flag = #{delFlag},</if>
            <if test="createDept != null">create_dept = #{createDept},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="doctorId != null">doctor_id = #{doctorId},</if>
            <if test="startTime != null">start_time = #{startTime},</if>
            <if test="endTime != null">end_time = #{endTime},</if>
            <if test="positionZh != null">position_zh = #{positionZh},</if>
            <if test="positionEn != null">position_en = #{positionEn},</if>
            <if test="contentZh != null">content_zh = #{contentZh},</if>
            <if test="contentEn != null">content_en = #{contentEn},</if>
        </trim>
        where id = #{id}
    </update>

    <update id="updateBatchById" parameterType="DoctorWorkExperience">
        <foreach collection="list" item="item" separator=";">
            update t_doctor_work_experience
            <trim prefix="SET" suffixOverrides=",">
                <if test="item.delFlag != null">del_flag = #{item.delFlag},</if>
                <if test="item.createDept != null">create_dept = #{item.createDept},</if>
                <if test="item.createBy != null">create_by = #{item.createBy},</if>
                <if test="item.createTime != null">create_time = #{item.createTime},</if>
                <if test="item.updateBy != null">update_by = #{item.updateBy},</if>
                <if test="item.updateTime != null">update_time = #{item.updateTime},</if>
                <if test="item.doctorId != null">doctor_id = #{item.doctorId},</if>
                <if test="item.startTime != null">start_time = #{item.startTime},</if>
                <if test="item.endTime != null">end_time = #{item.endTime},</if>
                <if test="item.positionZh != null">position_zh = #{item.positionZh},</if>
                <if test="item.positionEn != null">position_en = #{item.positionEn},</if>
                <if test="item.contentZh != null">content_zh = #{item.contentZh},</if>
                <if test="item.contentEn != null">content_en = #{item.contentEn},</if>
            </trim>
            where id = #{item.id}
        </foreach>
    </update>

    <delete id="deleteDoctorWorkExperienceById" parameterType="Long">
        delete from t_doctor_work_experience where id = #{id}
    </delete>

    <delete id="deleteDoctorWorkExperienceByIds" parameterType="String">
        delete from t_doctor_work_experience where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <delete id="deleteByDoctorIds">
        delete from t_doctor_work_experience where doctor_id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
</mapper>