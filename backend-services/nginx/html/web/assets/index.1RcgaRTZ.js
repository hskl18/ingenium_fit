var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(r,t,o)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o;import{a7 as p,a8 as i,u as c,W as l,X as d,C as u}from"./index-C4mh4fvZ.js";const y={401:"身份验证失败，请登录",700:"登录过期，请重新登录"},m=e=>{const m=p();return new Promise(((p,f)=>{var T;i((T=((e,r)=>{for(var t in r||(r={}))a.call(r,t)&&n(e,t,r[t]);if(o)for(var t of o(r))s.call(r,t)&&n(e,t,r[t]);return e})({},e),r(T,t({dataType:"json",success(r){const t=r.data,o=c();t instanceof ArrayBuffer||!t.serverTime||(o.serverTime=t.serverTime),t instanceof ArrayBuffer||200===t.code?p(t):401===t.code||700===t.code?(l({icon:"none",title:y[t.code]}),m.clear(),d({url:u.loginPath}),f(t)):(!e.hideErrorToast&&l({icon:"none",title:r.data.msg||"请求错误"}),f(t))},fail(e){l({icon:"none",title:"请求失败，请稍后重试"}),f(e)}}))))}))};m.get=(e,r,t="text")=>m({url:e,query:r,responseType:t,method:"GET"}),m.post=(e,r,t,o="text")=>m({url:e,query:t,data:r,responseType:o,method:"POST"}),m.put=(e,r,t,o="text")=>m({url:e,query:t,data:r,responseType:o,method:"PUT"}),m.delete=(e,r,t,o="text")=>m({url:e,query:r,data:t,responseType:o,method:"DELETE"});const f=e=>m.post("/app/register",e),T=e=>m.post("/app/sendSms",e),g=e=>m.get(`/app/agreement/getAgreement/${e}`);export{g,f as r,T as s};
