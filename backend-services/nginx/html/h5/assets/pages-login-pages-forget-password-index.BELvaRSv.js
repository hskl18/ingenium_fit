var e=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(r,o,t)=>o in r?e(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,n=(e,r)=>{for(var o in r||(r={}))l.call(r,o)&&s(e,o,r[o]);if(t)for(var o of t(r))a.call(r,o)&&s(e,o,r[o]);return e},c=(e,t)=>r(e,o(t));import{d as i,u as p,b as u,r as m,c as d,i as f,w as x,a9 as h,N as b,C as g,f as _,_ as v,g as w,h as y,o as j,k as E,j as S,n as V,q as C,t as P,p as z,z as k,x as O,c0 as M,ab as U,bX as R,bZ as I,I as A}from"./index-D9qffpGI.js";import{_ as G,a as T}from"./wd-tabs.CszGwLH7.js";import{_ as D}from"./26.BymsYty5.js";import{u as F,_ as W}from"./useGetMsgCode.DBuaUuCN.js";import{z as B,p as L,v as N}from"./index.CJVvTSkr.js";import{d as Z}from"./index.v6CH64ft.js";import{_ as $}from"./status-bar.vue_vue_type_script_setup_true_lang.DoCQBNOC.js";import{_ as q}from"./choose-area-code.vue_vue_type_script_setup_true_lang.Cb6rlvUN.js";import{u as H}from"./useGetEmailMsgCode.unpV1CMg.js";import{w as J}from"./when.CilpbOlU.js";import{g as K}from"./gt.BhFD8g82.js";import{l as Q}from"./lte.BVKc29H8.js";import{p as X}from"./pick.yfjiDSqe.js";import"./useTouch.3qBtZ6ci.js";import"./_curry2.BXt8VKw3.js";import"./keys.FBP1WlYN.js";import"./_nth.UVa0PGVR.js";import"./14.-y9J3EI9.js";import"./15.Bsjg2eDx.js";import"./useNetworkStatusChange.yjU6JEeW.js";import"./_curry3.VAFlxIU6.js";const Y=A(i({__name:"index",setup(e){const{t:r}=p(),o=u(),t=m(),{getMsgCode:l}=H(),{isSend:a,getMsgCode:s}=F(),i=m(0),A=m({areaCode:o.userArea.areaCode||"",email:"",phone:"",captcha:"",loginPwd:"",confirmPassword:"",userPort:1}),Y=B.string().min(1,{message:r("common.input-placeholder.mobile-phone-number")}),ee=B.string().min(1,{message:r("common.input-placeholder.email")}).email({message:r("common.prompt.mailbox-number-incorrect")}),re=d(()=>{switch(i.value){case 0:return B.object({email:ee,loginPwd:B.string().min(1,{message:r("common.input-placeholder.new-password")}),captcha:B.string().min(1,{message:r("common.input-placeholder.verification-code")})});case 1:return B.object({phone:Y,loginPwd:B.string().min(1,{message:r("common.input-placeholder.new-password")}),captcha:B.string().min(1,{message:r("common.input-placeholder.verification-code")})})}});function oe(){var e;null==(e=t.value)||e.init()}function te(e){A.value.areaCode=null==e?void 0:e.areaCode,A.value.phoneAreaCodeIcon=null==e?void 0:e.countryRegionIcon}const le=J(function(){var e,r;const o=null==(r=null==(e=re.value)?void 0:e.safeParse)?void 0:r.call(e,A.value);if(!o.success){const e=o.error.flatten().fieldErrors,r=L([0,0],N(e));r&&h({title:r,icon:"none"})}return o.success},Z(g.debounceLongTime,function(){return e=this,t=null,l=function*(){try{yield M(A.value),yield h({title:r("common.prompt.forget-password-successfully"),icon:"none"}),o.clear(),setTimeout(U(),1e3)}catch(e){}},new Promise((r,o)=>{var a=e=>{try{n(l.next(e))}catch(r){o(r)}},s=e=>{try{n(l.throw(e))}catch(r){o(r)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);n((l=l.apply(e,t)).next())});var e,t,l},{atBegin:!0}));function ae(){if(0===+i.value){if(!function(){const e=ee.safeParse(A.value.email);if(!e.success){const r=e.error.format();L(["_errors",0],r)&&h({title:L(["_errors",0],r),icon:"none"})}return e.success}())return;l(c(n({},X(["email"],A.value)),{type:R.FORGET_PASSWORD}))}else{if(!function(){const e=Y.safeParse(A.value.phone);if(!e.success){const r=e.error.format();L(["_errors",0],r)&&h({title:L(["_errors",0],r),icon:"none"})}return e.success}())return;s(c(n({},X(["phone","areaCode"],A.value)),{type:I.FORGET_PASSWORD}))}}function se(){U()}return(e,o)=>{const l=V,s=S,n=_(w("wd-input"),v),c=_(w("wd-button"),y),p=_(w("wd-tab"),G),u=O,m=_(w("wd-tabs"),T),d=b("layout-default-uni");return j(),f(d,null,{default:x(()=>[E(s,{class:"h-full"},{default:x(()=>[E($),E(s,{class:"",onClick:se},{default:x(()=>[E(l,{class:"w-140rpx h-140rpx",src:D})]),_:1}),E(s,{class:"mt-38rpx px-32rpx"},{default:x(()=>[E(s,{class:"text-center text-48rpx text-#333 font-500"},{default:x(()=>[C(P(z(r)("common.forgot-password")),1)]),_:1})]),_:1}),E(s,{class:"mt-118rpx px-32rpx pb-30rpx"},{default:x(()=>[E(s,{class:""},{default:x(()=>[E(m,{"slidable-num":0,lineWidth:31,lineHeight:2,inactiveColor:"#96959B",color:"#02989F",modelValue:z(i),"onUpdate:modelValue":o[6]||(o[6]=e=>k(i)?i.value=e:null)},{default:x(()=>[E(p,{title:z(r)("common.email")},{default:x(()=>[E(s,{class:"mt-86rpx"},{default:x(()=>[E(s,{class:"mb-20rpx text-28rpx text-#333333 font-500"},{default:x(()=>[C(P(z(r)("common.email")),1)]),_:1}),E(s,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:x(()=>[E(n,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:255,modelValue:z(A).email,"onUpdate:modelValue":o[0]||(o[0]=e=>z(A).email=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:z(r)("common.input-placeholder.email")},null,8,["modelValue","placeholder"])]),_:1}),E(s,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:x(()=>[C(P(z(r)("common.new-password")),1)]),_:1}),E(s,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:x(()=>[E(n,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,"show-password":"",modelValue:z(A).loginPwd,"onUpdate:modelValue":o[1]||(o[1]=e=>z(A).loginPwd=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:z(r)("common.input-placeholder.new-password")},null,8,["modelValue","placeholder"])]),_:1}),E(s,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:x(()=>[C(P(z(r)("common.captcha")),1)]),_:1}),E(s,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:x(()=>[E(n,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:z(A).captcha,"onUpdate:modelValue":o[2]||(o[2]=e=>z(A).captcha=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:z(r)("common.input-placeholder.verification-code")},null,8,["modelValue","placeholder"]),E(s,{class:"relative z-1 inline-flex center shrink-0 ml-20rpx"},{default:x(()=>[E(c,{type:"text",disabled:K(z(a),0),"custom-class":"!text-26rpx",onClick:ae},{default:x(()=>[C(P(Q(z(a),0)?z(r)("common.get-verification-code"):`${z(a)}S`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),E(p,{title:z(r)("common.mobile-phone-number")},{default:x(()=>[E(s,{class:"mt-86rpx"},{default:x(()=>[E(s,{class:"mb-20rpx text-28rpx text-#333333 font-500"},{default:x(()=>[C(P(z(r)("common.mobile-phone-number")),1)]),_:1}),E(s,{class:"flex space-x-8rpx"},{default:x(()=>[E(s,{class:"flex px-32rpx items-center space-x-34rpx h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full",onClick:oe},{default:x(()=>[E(u,{class:"text-28rpx text-#333"},{default:x(()=>[C(P(z(A).areaCode),1)]),_:1}),E(l,{class:"w-28rpx h-16rpx",src:W})]),_:1}),E(s,{class:"flex-1 flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:x(()=>[E(n,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:z(A).phone,"onUpdate:modelValue":o[3]||(o[3]=e=>z(A).phone=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:z(r)("common.input-placeholder.mobile-phone-number")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),E(s,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:x(()=>[C(P(z(r)("common.new-password")),1)]),_:1}),E(s,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:x(()=>[E(n,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:z(A).phone,"onUpdate:modelValue":o[4]||(o[4]=e=>z(A).phone=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:z(r)("common.input-placeholder.new-password")},null,8,["modelValue","placeholder"])]),_:1}),E(s,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:x(()=>[C(P(z(r)("common.captcha")),1)]),_:1}),E(s,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:x(()=>[E(n,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:z(A).phone,"onUpdate:modelValue":o[5]||(o[5]=e=>z(A).phone=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:z(r)("common.input-placeholder.verification-code")},null,8,["modelValue","placeholder"]),E(s,{class:"relative z-1 inline-flex center shrink-0 ml-20rpx"},{default:x(()=>[E(c,{type:"text",disabled:K(z(a),0),"custom-class":"!text-26rpx",onClick:ae},{default:x(()=>[C(P(Q(z(a),0)?z(r)("common.get-verification-code"):`${z(a)}S`),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),E(s,{class:"mt-178rpx"},{default:x(()=>[E(c,{"custom-class":"!h-90rpx !text-32rpx",block:"",onClick:z(le)},{default:x(()=>[C(P(z(r)("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),E(q,{ref_key:"chooseAreaCodeRef",ref:t,onSuccess:te},null,512)]),_:1})]),_:1})}}}),[["__scopeId","data-v-096f62f0"]]);export{Y as default};
