var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&o(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{aB as u,aD as c,aC as d,aE as m,d as p,ar as y,r as f,c as v,$ as b,i as g,o as h,j as w,a7 as _,H as C,w as x,s as k,v as O,k as j,m as I,aH as z,au as A,F as H,aA as P,I as V}from"./index-D9qffpGI.js";const E=i(n({},u),{num:m(5),modelValue:{type:[String,Number,null],default:null},readonly:c(!1),size:d("16px"),space:d("4px"),color:d("#E8E8E8"),activeColor:{type:[String,Array],default:"linear-gradient(180deg, rgba(255,238,0,1) 0%,rgba(250,176,21,1) 100%)"},icon:d("star-on"),activeIcon:d("star-on"),disabled:c(!1),disabledColor:d("linear-gradient(315deg, rgba(177,177,177,1) 0%,rgba(199,199,199,1) 100%)"),allowHalf:c(!1)}),S=V(p(i(n({},{name:"wd-rate",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:E,emits:["update:modelValue","change"],setup(e,{emit:a}){const{proxy:t}=y(),l=e,s=a,r=f([]),o=f(""),n=v(()=>`background:${l.color};`),i=v(()=>`background:${l.disabled?l.disabledColor:o.value};`);b(()=>l.activeColor,e=>{Array.isArray(e)&&e.length,c()},{immediate:!0,deep:!0}),b([()=>l.num,()=>l.modelValue],()=>{!function(){const{modelValue:e,num:a,allowHalf:t}=l;if(null===e||!a)return;if("number"!=typeof e)return;const s=[],o=Math.floor(e);for(let l=0;l<a;l++)l<o?s.push("100%"):l===o&&t&&e%1!=0?s.push("50%"):s.push("0");r.value=s,c()}()},{immediate:!0,deep:!0});const u=e=>"0"!==e;function c(){const{activeColor:e,modelValue:a,num:t}=l;let s="";s=Array.isArray(e)&&e.length?Number(a)<=.6*t||!e[1]?e[0]:e[1]:e,o.value=s}function d(e,a){if(l.readonly||l.disabled)return;const t=a?e+.5:e+1;s("update:modelValue",t),s("change",{value:t})}function m(e){return a=this,s=null,r=function*(){const{clientX:a}=e.touches[0],s=yield P(".wd-rate__item",!0,t),r=Array.from(s).findIndex(e=>a>=e.left&&a<=e.right);if(-1!==r){const e=s[r],t=e.width,o=l.allowHalf&&a-e.left<t/2;(o?r+.5:r+1)>=.5&&d(r,o)}},new Promise((e,t)=>{var l=e=>{try{n(r.next(e))}catch(a){t(a)}},o=e=>{try{n(r.throw(e))}catch(a){t(a)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,o);n((r=r.apply(a,s)).next())});var a,s,r}return(e,a)=>{const t=w;return h(),g(t,{class:C(`wd-rate ${e.customClass}`),style:_(e.customStyle),onTouchmove:m},{default:x(()=>[(h(!0),k(H,null,O(r.value,(a,s)=>(h(),g(t,{key:s,"data-index":s,style:_({"margin-right":s==r.value.length-1?0:e.space}),class:"wd-rate__item"},{default:x(()=>[j(z,{"custom-class":"wd-rate__item-star",name:u(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"100%"===a?i.value:n.value,onClick:e=>d(s,!1)},null,8,["name","size","custom-style","onClick"]),l.allowHalf?(h(),g(t,{key:0,class:"wd-rate__item-half",onClick:A(e=>d(s,!0),["stop"])},{default:x(()=>[j(z,{"custom-class":"wd-rate__item-star",name:u(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"0"!==a?i.value:n.value},null,8,["name","size","custom-style"])]),_:2},1032,["onClick"])):I("",!0)]),_:2},1032,["data-index","style"]))),128))]),_:1},8,["class","style"])}}})),[["__scopeId","data-v-5d041dd3"]]);export{S as _};
