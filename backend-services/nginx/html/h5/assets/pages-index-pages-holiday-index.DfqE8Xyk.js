var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&o(e,t,a[t]);return e},n=(e,l)=>a(e,t(l)),c=(e,a,t)=>new Promise((l,r)=>{var s=e=>{try{u(t.next(e))}catch(a){r(a)}},o=e=>{try{u(t.throw(e))}catch(a){r(a)}},u=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,o);u((t=t.apply(e,a)).next())});import{d as p,u as i,r as x,C as d,f,_ as m,g as A,T as v,i as y,o as h,j as b,w as g,k as _,x as w,q as k,t as C,p as I,n as j,z as S,ad as F,s as R,v as V,H as B,l as D,y as M,F as O,an as Q,a as T,b as U,Q as E,J as N,ao as Z,N as Y,ap as H,m as K,I as z}from"./index-D9qffpGI.js";import{_ as G}from"./14.-y9J3EI9.js";import{_ as J}from"./15.Bsjg2eDx.js";import{t as L}from"./index.v6CH64ft.js";import{u as P}from"./useNetworkStatusChange.yjU6JEeW.js";import{g as X}from"./gt.BhFD8g82.js";import"./_curry2.BXt8VKw3.js";const W=p({__name:"choose-area",emits:["success"],setup(e,{expose:a,emit:t}){const l=t,{t:r}=i(),s=x(!1),o=x(!1),p=x(""),T=x([]),U=x(""),E=x(""),N=x([]);function Z(){s.value=!1}const Y=L(d.throttleTime,function(){H()});function H(){return c(this,null,function*(){try{const e=yield Q({searchValue:p.value,type:U.value});N.value=e.data||[]}catch(e){}})}return P(()=>{U.value&&H()}),a({show:s,init:function({type:e,title:a,multiple:t,valueIds:l}){E.value=a,o.value=t,T.value=l||[],e!==U.value&&(U.value=e,H()),s.value=!0},close:Z}),(e,a)=>{const t=w,c=j,i=b,x=f(A("wd-input"),m),d=F,Q=f(A("wd-popup"),v);return h(),y(i,null,{default:g(()=>[_(Q,{position:"bottom","safe-area-inset-bottom":"",modelValue:I(s),"onUpdate:modelValue":a[1]||(a[1]=e=>S(s)?s.value=e:null),onClose:Z,"custom-class":"h-808rpx flex flex-col  rounded-t-30rpx"},{default:g(()=>[_(i,{class:"pt-32rpx px-32rpx pb-40rpx"},{default:g(()=>[_(i,{class:"mb-26rpx relative center"},{default:g(()=>[_(t,{class:"text-36rpx text-#000 font-500"},{default:g(()=>[k(C(I(E)),1)]),_:1}),_(c,{class:"w-32rpx h-32rpx absolute right-0rpx",src:G,onClick:Z})]),_:1}),_(i,{class:"center h-80rpx px-24rpx relative z-1 bg-#F5F5F5 rounded-full"},{default:g(()=>[_(x,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,modelValue:I(p),"onUpdate:modelValue":a[0]||(a[0]=e=>S(p)?p.value=e:null),"custom-class":"flex-1 !bg-transparent",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:I(r)("common.input-placeholder.search-content"),onClear:I(Y),onConfirm:I(Y)},{prefix:g(()=>[_(i,{class:"center"},{default:g(()=>[_(c,{class:"w-32rpx h-32rpx",src:J})]),_:1})]),_:1},8,["modelValue","placeholder","onClear","onConfirm"])]),_:1})]),_:1}),_(d,{"scroll-y":"true",class:"flex-1 overflow-hidden"},{default:g(()=>[_(i,{class:"px-32rpx"},{default:g(()=>[(h(!0),R(O,null,V(I(N),(e,a)=>(h(),y(i,{class:B(["box-border py-18rpx flex items-center justify-between px-34rpx space-x-20rpx",[]]),key:e.code,onClick:a=>function(e){o.value?T.value.includes(e.id)?T.value=T.value.filter(a=>a!==e.id):T.value.push(e.id):T.value=[e.id],l("success",n(u({},e),{areaType:U.value}))}(e)},{default:g(()=>[_(i,{class:"flex items-center space-x-20rpx"},{default:g(()=>[_(c,{class:"w-40rpx h-28rpx",mode:"aspectFill",src:e.icon},null,8,["src"]),_(t,{class:"text-28rpx text-#333"},{default:g(()=>[k(C(e.countryRegionName),1)]),_:2},1024)]),_:2},1024),D(_(c,{class:"w-32rpx h-20rpx shrink-0",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAALySURBVFiF1Zg/TBNRHMc/v9dGTWRwYOjI4FATBxcHExzYJGHABAcSTTgQC9ZEGI2D3RyB4YAz0DMxBBMxLibEMHQQoyMDAyvRoWwO1Tj03s8B0fZ6Lf1zBflu937vvX5+fe/efX8Pzpo8P43np48e5TRZWlIulzSpPh/0LgAqK3Z6bPJsJJDLJSXVty7oSGWzFa4kT4upablujyQubgraHxU2J83TkhrDr5Fx9v7fFWgAr8pbPdgfA/g/E3D9lEnIFujVmpiyoNPOzNHj4Uu8lB8S4TmAKk+YHn9/Uqw1cv2USVAA0jUxZcFWwAMIntdr9NxX4MJhJy1bYZSp8Y2T4K1Si/AABk32cQQPIJI0yjrL+ZFw567K89MmwWei4C2zUfAAhvNmF2S3qvUoiUV/uCuwYXl+2igFoK8mZpm1D535ekMNjvPLit4BilURkaQx+gpvNfL8jU3/4FM1sWPgodJK1J1IS1Z0kMzEdhy8VfJW+43KO5DeEFZZVO8F087r46aothInmcQh/CZITwipbLFNHyK1XuiFf81Y+QgampjvVrhBxtlrl/mvYoKHKCvxwNmxEgyClEKRS0YpVFrZtrToD9eBL1ljB1s9vuu7UW+132hiM2IlilYYaGsllvMjRllHJOQApGQlaGuLNrbTh0kUQMOWo2gT5etMTn5r+pe6AA/HudHMxLbFjoKUQ5GUCZJbuH7t0RehxGL+fjQ8RUsw0Mnh0FxBs5wfMZj1iJXYswEDZJ1i5DjALPozGOYiQu1vxQo1X5G1kUS34aGVgmZqfAO1sxGRtCTkDa5b9bKbpZdP68Dv2SC4GctxTBtFfb1/VZFtDX4Mks2WzLI/B0SZr2O3XKtqq6hvlIQIO6g+ihgWOzx0cK1ilvwcwrNm+ip80YDbccNDh/dCZsmfR3jcqI/CJw1+3iKbDX/ZY1HH90KNkug2PMRwrfKnUnLD7ap86DY8xHQvZIv7M8BqRdOaHuwPdRs+frkrlzt2qy3qN9kFUfIBzYE1AAAAAElFTkSuQmCC"},null,512),[[M,I(T).includes(e.id)]])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),q=z(p({__name:"index",setup(e){const{t:a}=i(),t=E("dayjs"),l=T(),r=U(),s=t.weekdaysShort(),o=x(),p=x(0),d=x([]),f=x([]),m=x({countryDbId:r.userArea.id,countryRegionName:r.userArea.countryRegionName});function A(){var e;null==(e=o.value)||e.init({type:1,title:a("common.choose-area"),valueIds:[m.value.countryDbId]})}function v(e){m.value.countryDbId=e.id,m.value.countryRegionName=e.countryRegionName,F()}function S(e){e>0?p.value<d.value.length-1&&(p.value++,F()):p.value>0&&(p.value--,F())}function F(){return c(this,null,function*(){try{const e=yield H(n(u({},m.value),{yearValue:d.value[p.value],portNum:1}));f.value=e.data||[]}catch(e){}})}return N(()=>{!function(){c(this,null,function*(){var e;try{const a=yield Q({type:1});a.data.length&&!a.data.some(e=>e.id===r.userArea.id)&&(m.value.countryDbId=null==(e=a.data[0])?void 0:e.id);const s=yield Z();if(d.value=s.data||[],d.value.length>0){const e=d.value.findIndex(e=>+e===t(+l.serverTime).year());e>-1&&(p.value=e),yield F()}}catch(a){}})}()}),(e,r)=>{const u=w,n=b,c=j,i=Y("layout-default-uni");return h(),y(i,null,{default:g(()=>[_(n,{class:""},{default:g(()=>[_(n,{class:"py-20rpx px-32rpx"},{default:g(()=>[_(n,{class:"flex items-center pr-20rpx pl-36rpx h-76rpx bg-common rounded-38rpx",onClick:A},{default:g(()=>[_(n,{class:"flex-1"},{default:g(()=>[_(u,{class:"text-28rpx text-#333"},{default:g(()=>[k(C(I(m).countryRegionName),1)]),_:1})]),_:1}),_(n,{class:"shrink-0 flex"},{default:g(()=>[_(c,{class:"w-24rpx h-12rpx",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAMCAYAAAB4MH11AAAAAXNSR0IArs4c6QAAALtJREFUOE+l0z0OAiEQBeBHsgVzA49giBXEwtLSYk9raWFpY2hMiEfwACbQYSAbgz8sI1IOyfsYMiMAQGt9AjCEEEbn3C3Veo9SakFEhxjj3Vq7ESnIGHMBsAJw9d5ve5Ep/AhgGWM8W2vXGSgvepFaRgb+ReYe+AR6kVb3L8CvSCs85X0AXIQTXgVaCDd8FqghqU5EeRQ5E/f1i8ole3/tdMcKb3ZQGeFUZi9ks4MSkVLuhRCD937H3fYH86m2DXVKMBkAAAAASUVORK5CYII="})]),_:1})]),_:1}),I(d).length?(h(),y(n,{key:0,class:"mt-52rpx center space-x-16rpx"},{default:g(()=>[_(n,{class:B(["i-carbon:chevron-left text-36rpx font-bold text-#bbb",[I(p)>0&&"!text-primary"]]),onClick:r[0]||(r[0]=e=>S(-1))},null,8,["class"]),_(n,{class:"text-32rpx text-primary font-500"},{default:g(()=>[k(C(I(d)[I(p)])+C(I(a)("common.year")),1)]),_:1}),_(n,{class:B(["i-carbon:chevron-right text-36rpx font-bold text-#bbb",[I(p)<I(d).length-1&&"!text-primary"]]),onClick:r[1]||(r[1]=e=>S(1))},null,8,["class"])]),_:1})):K("",!0)]),_:1}),_(n,{class:"pt-8rpx px-24rpx pb-30rpx"},{default:g(()=>[(h(!0),R(O,null,V(I(f),(e,r)=>(h(),y(n,{class:B(["",[X(r,0)&&"mt-36rpx"]]),key:e.monthValue},{default:g(()=>[_(n,{class:"mb-24rpx text-36rpx text-#333 font-500"},{default:g(()=>[k(C(e.monthValue)+C(I(a)("common.month")),1)]),_:2},1024),(h(!0),R(O,null,V(e.groupList,(e,r)=>(h(),y(n,{class:B(["relative flex items-center h-154rpx bg-#fff rounded-10rpx shadow-[0rpx_4rpx_20rpx_0rpx_rgba(0,0,0,0.16)]",[X(r,0)&&"mt-28rpx"]]),key:e.id},{default:g(()=>[_(n,{class:B(["absolute left-0 top-0 w-12rpx bottom-0 bg-primary rounded-l-10rpx",[I(t)(I(l).serverTime).isSameOrAfter(I(t)(+e.holidayTime))&&"!bg-#FFB515"]])},null,8,["class"]),_(n,{class:"w-196rpx center flex-col"},{default:g(()=>[_(n,{class:"text-40rpx text-#333 font-700"},{default:g(()=>[k(C(e.dayValue),1)]),_:2},1024),_(n,{class:"mt-12rpx text-24rpx text-primary"},{default:g(()=>[k(C(I(s)[I(t)(+e.holidayTime).day()]),1)]),_:2},1024)]),_:2},1024),_(n,{class:"h-78rpx border-r-2rpx border-solid border-#D8D8D8"}),_(n,{class:"pl-64rpx pr-24rpx flex-1"},{default:g(()=>[_(n,{class:"flex items-center justify-between"},{default:g(()=>[_(u,{class:"text-32rpx text-#000 font-500"},{default:g(()=>[k(C(e.holidayName),1)]),_:2},1024),I(t)(+I(l).serverTime).isSameOrAfter(I(t)(+e.holidayTime))?(h(),y(u,{key:0,class:"text-24rpx text-#999"},{default:g(()=>[k(C(I(a)("pages-index.holiday.has-passed")),1)]),_:1})):(h(),y(u,{key:1,class:"text-24rpx text-primary"},{default:g(()=>[k(C(I(a)("common.distance"))+" "+C(e.distanceDay)+" "+C(I(a)("common.day")),1)]),_:2},1024))]),_:2},1024),_(n,{class:"mt-32rpx text-28rpx text-#666"},{default:g(()=>[k(C(e.holidayType),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:2},1032,["class"]))),128))]),_:1}),_(W,{ref_key:"chooseAreaRef",ref:o,onSuccess:v},null,512)]),_:1})]),_:1})}}}),[["__scopeId","data-v-455a4436"]]);export{q as default};
