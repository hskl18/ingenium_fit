var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&t(e,l,a[l]);if(r)for(var l of r(a))s.call(a,l)&&t(e,l,a[l]);return e},n=(e,r)=>a(e,l(r)),u=(e,a,l)=>new Promise((r,o)=>{var s=e=>{try{i(l.next(e))}catch(a){o(a)}},t=e=>{try{i(l.throw(e))}catch(a){o(a)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,t);i((l=l.apply(e,a)).next())});import{aB as c,aC as d,aD as p,aP as f,aE as m,by as h,d as b,bF as g,bJ as v,c as y,aO as x,r as _,bK as w,$,bz as C,bA as k,aF as S,i as P,o as j,j as O,a7 as V,H as W,w as E,m as I,k as T,aJ as H,aH as B,x as L,q,t as F,bL as z,bE as A,bM as D,I as K}from"./index-D9qffpGI.js";const M=n(i({},c),{customTextareaContainerClass:d(""),customTextareaClass:d(""),customLabelClass:d(""),modelValue:h(""),placeholder:String,placeholderStyle:String,placeholderClass:d(""),disabled:p(!1),maxlength:m(-1),autoFocus:p(!1),focus:p(!1),autoHeight:p(!1),fixed:p(!1),cursorSpacing:m(0),cursor:m(-1),confirmType:String,confirmHold:p(!1),showConfirmBar:p(!0),selectionStart:m(-1),selectionEnd:m(-1),adjustPosition:p(!0),disableDefaultPadding:p(!1),holdKeyboard:p(!1),showPassword:p(!1),clearable:p(!1),readonly:p(!1),prefixIcon:String,showWordLimit:p(!1),label:String,labelWidth:d(""),size:String,error:p(!1),center:p(!1),noBorder:p(!1),required:p(!1),prop:d(""),rules:f(),clearTrigger:d("always"),focusWhenClear:p(!0),ignoreCompositionEvent:p(!0),inputmode:d("text")}),J=K(b(n(i({},{name:"wd-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:M,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:a}){const{translate:l}=g("textarea"),r=e,o=a,s=v(),t=y(()=>x(r.placeholder)?r.placeholder:l("placeholder")),i=_(!1),n=_(!1),c=_(!1),d=_(""),p=w();$(()=>r.focus,e=>{n.value=e},{immediate:!0,deep:!0}),$(()=>r.modelValue,e=>{d.value=x(e)?String(e):""},{immediate:!0,deep:!0});const{parent:f}=C(D),m=y(()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:o}=r;return!(!l||a||e||!d.value||!("always"===o||"focus"===r.clearTrigger&&c.value))}),h=y(()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:o}=r;return Boolean(!e&&!a&&x(l)&&l>-1&&o)}),b=y(()=>f&&r.prop&&f.errorMessages&&f.errorMessages[r.prop]?f.errorMessages[r.prop]:""),K=y(()=>{let e=!1;if(f&&f.props.rules){const a=f.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===r.prop&&Array.isArray(a[l])&&(e=a[l].some(e=>e.required))}return r.required||r.rules.some(e=>e.required)||e}),M=y(()=>Array.from(String(R(r.modelValue)||"")).length),J=y(()=>`wd-textarea   ${r.label||s.label?"is-cell":""} ${r.center?"is-center":""} ${p.border.value?"is-border":""} ${r.size?"is-"+r.size:""} ${r.error?"is-error":""} ${r.disabled?"is-disabled":""} ${r.autoHeight?"is-auto-height":""} ${M.value>0?"is-not-empty":""}  ${r.noBorder?"is-no-border":""} ${r.customClass}`),G=y(()=>`wd-textarea__label ${r.customLabelClass} ${K.value?"is-required":""}`),U=y(()=>`wd-textarea__placeholder  ${r.placeholderClass}`),N=y(()=>`${M.value>0?"wd-textarea__count-current":""} ${M.value>r.maxlength?"is-error":""}`),Q=y(()=>r.labelWidth?k({"min-width":r.labelWidth,"max-width":r.labelWidth}):"");function R(e){const{maxlength:a,showWordLimit:l}=r;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}function X(){return u(this,null,function*(){i.value=!0,c.value=!1,d.value="",r.focusWhenClear&&(n.value=!1),yield A(),r.focusWhenClear&&(n.value=!0,c.value=!0),o("update:modelValue",d.value),o("clear")})}function Y(e){return u(this,arguments,function*({detail:e}){yield A(150),i.value?i.value=!1:(c.value=!1,o("blur",{value:d.value,cursor:e.cursor?e.cursor:null}))})}function Z({detail:e}){c.value=!0,o("focus",e)}function ee({detail:e}){d.value=R(d.value),o("update:modelValue",d.value),o("input",e)}function ae({detail:e}){o("keyboardheightchange",e)}function le({detail:e}){o("confirm",e)}function re({detail:e}){o("linechange",e)}function oe(){o("clickprefixicon")}return S(()=>{d.value=R(d.value),o("update:modelValue",d.value)}),(e,a)=>{const l=O,o=L,s=z;return j(),P(l,{class:W(J.value),style:V(e.customStyle)},{default:E(()=>[e.label||e.$slots.label?(j(),P(l,{key:0,class:W(G.value),style:V(Q.value)},{default:E(()=>[e.prefixIcon||e.$slots.prefix?(j(),P(l,{key:0,class:"wd-textarea__prefix"},{default:E(()=>[e.prefixIcon&&!e.$slots.prefix?(j(),P(B,{key:0,"custom-class":"wd-textarea__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):H(e.$slots,"prefix",{key:1},void 0,!0)]),_:3})):I("",!0),T(l,{class:"wd-textarea__label-inner"},{default:E(()=>[e.label&&!e.$slots.label?(j(),P(o,{key:0},{default:E(()=>[q(F(e.label),1)]),_:1})):H(e.$slots,"label",{key:1},void 0,!0)]),_:3})]),_:3},8,["class","style"])):I("",!0),T(l,{class:W(`wd-textarea__value ${m.value?"is-suffix":""} ${e.customTextareaContainerClass} ${h.value?"is-show-limit":""}`)},{default:E(()=>[T(s,{class:W(`wd-textarea__inner ${e.customTextareaClass}`),modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),"show-count":!1,placeholder:t.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:n.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":U.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ee,onFocus:Z,onBlur:Y,onConfirm:le,onLinechange:re,onKeyboardheightchange:ae},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),b.value?(j(),P(l,{key:0,class:"wd-textarea__error-message"},{default:E(()=>[q(F(b.value),1)]),_:1})):I("",!0),r.readonly?(j(),P(l,{key:1,class:"wd-textarea__readonly-mask"})):I("",!0),T(l,{class:"wd-textarea__suffix"},{default:E(()=>[m.value?(j(),P(B,{key:0,"custom-class":"wd-textarea__clear",name:"error-fill",onClick:X})):I("",!0),h.value?(j(),P(l,{key:1,class:"wd-textarea__count"},{default:E(()=>[T(o,{class:W(N.value)},{default:E(()=>[q(F(M.value),1)]),_:1},8,["class"]),q(" /"+F(e.maxlength),1)]),_:1})):I("",!0)]),_:1})]),_:1},8,["class"])]),_:3},8,["class","style"])}}})),[["__scopeId","data-v-e3f25283"]]);export{J as _};
