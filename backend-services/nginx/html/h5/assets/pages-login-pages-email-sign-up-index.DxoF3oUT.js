var e=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(r,o,a)=>o in r?e(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,n=(e,r,o)=>new Promise((a,t)=>{var s=e=>{try{n(o.next(e))}catch(r){t(r)}},l=e=>{try{n(o.throw(e))}catch(r){t(r)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,l);n((o=o.apply(e,r)).next())});import{d as c,u as i,b as m,r as p,i as d,w as u,a9 as f,N as x,C as h,f as g,_ as b,g as w,h as _,o as y,k as v,j as E,n as j,q as P,t as V,p as S,b$ as I,M as k,aw as z,bt as M,A as C,bX as O,ab as R,I as U}from"./index-D9qffpGI.js";import{_ as A}from"./26.BymsYty5.js";import{z as G,p as L,v as T}from"./index.CJVvTSkr.js";import{d as q}from"./index.v6CH64ft.js";import{_ as D}from"./status-bar.vue_vue_type_script_setup_true_lang.DoCQBNOC.js";import{u as N}from"./useGetEmailMsgCode.unpV1CMg.js";import{e as $}from"./equals.DY-30pRn.js";import{w as B}from"./when.CilpbOlU.js";import{g as J}from"./gt.BhFD8g82.js";import{l as K}from"./lte.BVKc29H8.js";import{p as W}from"./pick.yfjiDSqe.js";import"./_curry2.BXt8VKw3.js";import"./keys.FBP1WlYN.js";import"./_nth.UVa0PGVR.js";import"./_curry3.VAFlxIU6.js";const X=U(c({__name:"index",setup(e){const{t:c}=i(),U=m(),{isSend:X,getMsgCode:Y}=N(),Z=p({name:"",email:"",captcha:"",loginPwd:"",confirmPassword:"",invitationCode:"",userPort:1}),F=G.string().min(1,{message:c("common.input-placeholder.email")}).email({message:c("common.prompt.mailbox-number-incorrect")}),H=G.object({name:G.string().min(1,{message:c("common.input-placeholder.name")}),email:F,captcha:G.string().min(1,{message:c("common.input-placeholder.verification-code")}),loginPwd:G.string().min(1,{message:c("common.input-placeholder.new-password")}),confirmPassword:G.string().min(1,{message:c("common.input-placeholder.confirm-password")})}).superRefine((e,r)=>{$(e.confirmPassword,e.loginPwd)||r.addIssue({code:G.ZodIssueCode.custom,path:["confirmPassword"],message:c("common.prompt.two-passwords-inconsistent")})});const Q=B(function(){const e=H.safeParse(Z.value);if(!e.success){const r=e.error.flatten().fieldErrors,o=L([0,0],T(r));o&&f({title:o,icon:"none"})}return e.success},q(h.debounceLongTime,function(){return n(this,null,function*(){try{const e=yield I(Z.value);yield f({title:c("pages-login.register-successfully"),icon:"none"}),U.token=e.data.token,yield k(()=>n(null,null,function*(){const e=yield U.getUserInfo();e.userRole?e.userRole!==z.INTERMEDIARY||e.whetherUploadIntermediaryExtraInfo?yield M({url:h.indexPath}):ee("/pages-login/pages/upload-material/index"):ee("/pages-login/pages/choose-identity/index")}))}catch(e){}})},{atBegin:!0}));function ee(e){C({url:e})}function re(){var e,n;(function(){const e=F.safeParse(Z.value.email);if(!e.success){const r=e.error.format();L(["_errors",0],r)&&f({title:L(["_errors",0],r),icon:"none"})}return e.success})()&&Y((e=((e,r)=>{for(var o in r||(r={}))t.call(r,o)&&l(e,o,r[o]);if(a)for(var o of a(r))s.call(r,o)&&l(e,o,r[o]);return e})({},W(["email"],Z.value)),n={type:O.EMAIL_REGISTER},r(e,o(n))))}function oe(){R()}return(e,r)=>{const o=j,a=E,t=g(w("wd-input"),b),s=g(w("wd-button"),_),l=x("layout-default-uni");return y(),d(l,null,{default:u(()=>[v(a,{class:"h-full"},{default:u(()=>[v(D),v(a,{class:"",onClick:oe},{default:u(()=>[v(o,{class:"w-140rpx h-140rpx",src:A})]),_:1}),v(a,{class:"mt-28rpx px-32rpx pb-30rpx"},{default:u(()=>[v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:u(()=>[P(V(S(c)("common.name")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:u(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:S(Z).name,"onUpdate:modelValue":r[0]||(r[0]=e=>S(Z).name=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.name")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:u(()=>[P(V(S(c)("common.email")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:u(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:255,modelValue:S(Z).email,"onUpdate:modelValue":r[1]||(r[1]=e=>S(Z).email=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.email")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:u(()=>[P(V(S(c)("common.captcha")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:u(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:S(Z).captcha,"onUpdate:modelValue":r[2]||(r[2]=e=>S(Z).captcha=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.verification-code")},null,8,["modelValue","placeholder"]),v(a,{class:"relative z-1 inline-flex center shrink-0 ml-20rpx"},{default:u(()=>[v(s,{type:"text",disabled:J(S(X),0),"custom-class":"!text-26rpx",onClick:re},{default:u(()=>[P(V(K(S(X),0)?S(c)("common.get-verification-code"):`${S(X)}S`),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:u(()=>[P(V(S(c)("common.password")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:u(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,"show-password":"",modelValue:S(Z).loginPwd,"onUpdate:modelValue":r[3]||(r[3]=e=>S(Z).loginPwd=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.password")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:u(()=>[P(V(S(c)("common.confirm-password")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:u(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,"show-password":"",modelValue:S(Z).confirmPassword,"onUpdate:modelValue":r[4]||(r[4]=e=>S(Z).confirmPassword=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.confirm-password")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-152rpx"},{default:u(()=>[v(s,{"custom-class":"!h-90rpx !text-32rpx",block:"",onClick:S(Q)},{default:u(()=>[P(V(S(c)("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-f4866a2f"]]);export{X as default};
