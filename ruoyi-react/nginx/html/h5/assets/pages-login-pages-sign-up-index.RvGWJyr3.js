var e=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(r,o,a)=>o in r?e(r,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[o]=a,n=(e,r,o)=>new Promise((a,t)=>{var s=e=>{try{n(o.next(e))}catch(r){t(r)}},l=e=>{try{n(o.throw(e))}catch(r){t(r)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,l);n((o=o.apply(e,r)).next())});import{d as c,u as p,b as i,r as u,i as d,w as m,a9 as f,N as x,C as h,f as b,_ as g,g as _,h as w,o as y,k as v,j,n as E,q as P,t as C,p as S,x as V,b$ as I,M as k,aw as z,bt as M,A as O,bZ as R,ab as U,I as A}from"./index-D9qffpGI.js";import{_ as N}from"./26.BymsYty5.js";import{u as G,_ as L}from"./useGetMsgCode.DBuaUuCN.js";import{z as T,p as Z,v as q}from"./index.CJVvTSkr.js";import{d as D}from"./index.v6CH64ft.js";import{_ as $}from"./status-bar.vue_vue_type_script_setup_true_lang.DoCQBNOC.js";import{_ as B}from"./choose-area-code.vue_vue_type_script_setup_true_lang.Cb6rlvUN.js";import{e as H}from"./equals.DY-30pRn.js";import{w as J}from"./when.CilpbOlU.js";import{g as Q}from"./gt.BhFD8g82.js";import{l as W}from"./lte.BVKc29H8.js";import{p as Y}from"./pick.yfjiDSqe.js";import"./_curry2.BXt8VKw3.js";import"./keys.FBP1WlYN.js";import"./_nth.UVa0PGVR.js";import"./14.-y9J3EI9.js";import"./15.Bsjg2eDx.js";import"./useNetworkStatusChange.yjU6JEeW.js";import"./_curry3.VAFlxIU6.js";const F=A(c({__name:"index",setup(e){const{t:c}=p(),A=i(),F=u(),{isSend:K,getMsgCode:X}=G(),ee=u({name:"",areaCode:A.userArea.areaCode||"",phone:"",captcha:"",loginPwd:"",confirmPassword:"",userPort:1}),re=T.string().min(1,{message:c("common.input-placeholder.mobile-phone-number")}),oe=T.object({name:T.string().min(1,{message:c("common.input-placeholder.name")}),phone:re,captcha:T.string().min(1,{message:c("common.input-placeholder.verification-code")}),loginPwd:T.string().min(1,{message:c("common.input-placeholder.new-password")}),confirmPassword:T.string().min(1,{message:c("common.input-placeholder.confirm-password")})}).superRefine((e,r)=>{H(e.confirmPassword,e.loginPwd)||r.addIssue({code:T.ZodIssueCode.custom,path:["confirmPassword"],message:c("common.prompt.two-passwords-inconsistent")})});function ae(){var e;null==(e=F.value)||e.init()}function te(e){ee.value.areaCode=null==e?void 0:e.areaCode,ee.value.phoneAreaCodeIcon=null==e?void 0:e.countryRegionIcon}const se=J(function(){const e=oe.safeParse(ee.value);if(!e.success){const r=e.error.flatten().fieldErrors,o=Z([0,0],q(r));o&&f({title:o,icon:"none"})}return e.success},D(h.debounceLongTime,function(){return n(this,null,function*(){try{const e=yield I(ee.value);yield f({title:c("pages-login.register-successfully"),icon:"none"}),A.token=e.data.token,yield k(()=>n(null,null,function*(){const e=yield A.getUserInfo();e.userRole?e.userRole!==z.INTERMEDIARY||e.whetherUploadIntermediaryExtraInfo?yield M({url:h.indexPath}):le("/pages-login/pages/upload-material/index"):le("/pages-login/pages/choose-identity/index")}))}catch(e){}})},{atBegin:!0}));function le(e){O({url:e})}function ne(){var e,n;(function(){const e=re.safeParse(ee.value.phone);if(!e.success){const r=e.error.format();Z(["_errors",0],r)&&f({title:Z(["_errors",0],r),icon:"none"})}return e.success})()&&X((e=((e,r)=>{for(var o in r||(r={}))t.call(r,o)&&l(e,o,r[o]);if(a)for(var o of a(r))s.call(r,o)&&l(e,o,r[o]);return e})({},Y(["phone","areaCode"],ee.value)),n={type:R.EMAIL_PHONE_REGISTER},r(e,o(n))))}function ce(){U()}return(e,r)=>{const o=E,a=j,t=b(_("wd-input"),g),s=V,l=b(_("wd-button"),w),n=x("layout-default-uni");return y(),d(n,null,{default:m(()=>[v(a,{class:"h-full"},{default:m(()=>[v($),v(a,{class:"",onClick:ce},{default:m(()=>[v(o,{class:"w-140rpx h-140rpx",src:N})]),_:1}),v(a,{class:"mt-28rpx px-32rpx pb-30rpx"},{default:m(()=>[v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:m(()=>[P(C(S(c)("common.name")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:m(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:11,modelValue:S(ee).name,"onUpdate:modelValue":r[0]||(r[0]=e=>S(ee).name=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.name")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:m(()=>[P(C(S(c)("common.mobile-phone-number")),1)]),_:1}),v(a,{class:"flex space-x-8rpx"},{default:m(()=>[v(a,{class:"flex px-32rpx items-center space-x-34rpx h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full",onClick:ae},{default:m(()=>[v(s,{class:"text-28rpx text-#333"},{default:m(()=>[P(C(S(ee).areaCode),1)]),_:1}),v(o,{class:"w-28rpx h-16rpx",src:L})]),_:1}),v(a,{class:"flex-1 flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:m(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:S(ee).phone,"onUpdate:modelValue":r[1]||(r[1]=e=>S(ee).phone=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.mobile-phone-number")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:m(()=>[P(C(S(c)("common.captcha")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:m(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,modelValue:S(ee).captcha,"onUpdate:modelValue":r[2]||(r[2]=e=>S(ee).captcha=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.verification-code")},null,8,["modelValue","placeholder"]),v(a,{class:"relative z-1 inline-flex center shrink-0 ml-20rpx"},{default:m(()=>[v(l,{type:"text",disabled:Q(S(K),0),"custom-class":"!text-26rpx",onClick:ne},{default:m(()=>[P(C(W(S(K),0)?S(c)("common.get-verification-code"):`${S(K)}S`),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:m(()=>[P(C(S(c)("common.password")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:m(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,"show-password":"",modelValue:S(ee).loginPwd,"onUpdate:modelValue":r[3]||(r[3]=e=>S(ee).loginPwd=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.password")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-28rpx mb-20rpx text-28rpx text-#333333 font-500"},{default:m(()=>[P(C(S(c)("common.confirm-password")),1)]),_:1}),v(a,{class:"flex px-28rpx items-center h-90rpx border-custom !after:border-#E8E8E8 after:rounded-full"},{default:m(()=>[v(t,{"no-border":"",clearable:"","focus-when-clear":!1,cursorSpacing:20,maxlength:20,"show-password":"",modelValue:S(ee).confirmPassword,"onUpdate:modelValue":r[4]||(r[4]=e=>S(ee).confirmPassword=e),modelModifiers:{trim:!0},"custom-class":"relative z-1 flex-1 !bg-transparent","custom-input-class":"!h-90rpx",placeholderStyle:"font-size: 28rpx;color: #999;line-height: 40rpx;",placeholder:S(c)("common.input-placeholder.confirm-password")},null,8,["modelValue","placeholder"])]),_:1}),v(a,{class:"mt-152rpx"},{default:m(()=>[v(l,{"custom-class":"!h-90rpx !text-32rpx",block:"",onClick:S(se)},{default:m(()=>[P(C(S(c)("common.confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1}),v(B,{ref_key:"chooseAreaCodeRef",ref:F,onSuccess:te},null,512)]),_:1})]),_:1})}}}),[["__scopeId","data-v-90a15aab"]]);export{F as default};
