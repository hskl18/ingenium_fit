var e=Object.defineProperty,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,i,o)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[i]=o,r=(e,r)=>{for(var a in r||(r={}))i.call(r,a)&&s(e,a,r[a]);if(t)for(var a of t(r))o.call(r,a)&&s(e,a,r[a]);return e},a=(e,t,i)=>new Promise((o,s)=>{var r=e=>{try{l(i.next(e))}catch(t){s(t)}},a=e=>{try{l(i.throw(e))}catch(t){s(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,a);l((i=i.apply(e,t)).next())});import{a6 as l,b9 as h,ba as n,I as d,b2 as c,i as u,o as g,w as f,k as p,j as m,H as T,n as y,a7 as S,m as w,x as R,q as C,t as x,s as M,F as b,bb as L,bc as v,bd as _,be as P,bf as D,bg as I,bh as z,bi as k,bj as H,bk as B,N as F,f as V,g as N,aJ as A,au as E,ad as $,v as O}from"./index-D9qffpGI.js";import{z as U,_ as W}from"./z-paging-empty-view.D2R4CSV8.js";import{c as j}from"./common-layout.D4krRS1d.js";const Y="2.8.0",K=100,Q="z-paging-error-emit",Z="z-paging-complete-emit",G="z-paging-cache",q="zp_index",X="zp_unique_index",J={"hide-no-more-inside":!0,"show-loading-more-no-more-view":!1,"auto-show-back-to-top":!0,"show-empty-view-reload-when-error":!1,"show-scrollbar":!1,"empty-view-img":"/static/images/16033@2x.png","empty-view-img-style":{width:"630rpx",height:"370rpx"},"empty-view-text":{de:"Keine Daten verfügbar",en:"No data available","zh-Hans":"暂无数据"},"empty-view-title-style":{marginTop:"54rpx"}},ee="Z-PAGING-REFRESHER-TIME-STORAGE-KEY";let te=null,ie=!1;const oe={};function se(){return n(ee)}function re(e){return l(e)}function ae(){return(new Date).getTime()}function le(e){return 1===(e=e.toString()).length?"0"+e:e}const he={gc:function(e,t){return()=>{if(function(){if(ie)return;J&&Object.keys(J).length&&(te=J);!te&&uni.$zp&&(te=uni.$zp.config);te=te?Object.keys(te).reduce((e,t)=>(e[function(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}(t)]=te[t],e),{}):null,ie=!0}(),!te)return t;const i=te[e];return void 0===i?t:i}},setRefesrherTime:function(e,t){const i=se()||{};i[t]=e,h(ee,i)},getRefesrherFormatTimeByKey:function(e,t){const i=function(e){const t=se();return t&&t[e]?t[e]:null}(e),o=i?function(e,t){const i=new Date(e),o=new Date,s=new Date(e).setHours(0,0,0,0),r=(new Date).setHours(0,0,0,0),a=s-r;let l="";const h=function(e){const t=e.getHours(),i=e.getMinutes();return`${le(t)}:${le(i)}`}(i);l=0===a?t.today:-864e5===a?t.yesterday:function(e,t=!0){const i=e.getFullYear(),o=e.getMonth()+1,s=e.getDate();return t?`${i}-${le(o)}-${le(s)}`:`${le(o)}-${le(s)}`}(i,i.getFullYear()!==o.getFullYear());return`${l} ${h}`}(i,t):t.none;return`${t.title}${o}`},getTouch:function(e){let t=null;if(e.touches&&e.touches.length)t=e.touches[0];else if(e.changedTouches&&e.changedTouches.length)t=e.changedTouches[0];else{if(!e.datail||e.datail=={})return{touchX:0,touchY:0};t=e.datail}return{touchX:t.clientX,touchY:t.clientY}},getTouchFromZPaging:function e(t){if(t&&t.tagName&&"BODY"!==t.tagName&&"UNI-PAGE-BODY"!==t.tagName){const i=t.classList;return i&&i.contains("z-paging-content")?{isFromZp:!0,isPageScroll:i.contains("z-paging-content-page"),isReachedTop:i.contains("z-paging-reached-top"),isUseChatRecordMode:i.contains("z-paging-use-chat-record-mode")}:e(t.parentNode)}return{isFromZp:!1}},getParent:function e(t){return t?t.$refs.paging?t:e(t.$parent):null},convertToPx:function(e){if("[object Number]"===Object.prototype.toString.call(e))return e;let t=!1;return-1!==e.indexOf("rpx")||-1!==e.indexOf("upx")?(e=e.replace("rpx","").replace("upx",""),t=!0):-1!==e.indexOf("px")&&(e=e.replace("px","")),isNaN(e)?0:Number(t?re(e):e)},getTime:ae,getInstanceId:function(){const e=[];for(let t=0;t<10;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e.join("")+ae()},consoleErr:function(e){},delay:function(e,t=K,i){const o=setTimeout(e,t);return i&&(oe[i]&&clearTimeout(oe[i]),oe[i]=o),o},wait:function(e){return new Promise(t=>{setTimeout(t,e)})},isPromise:function(e){return"[object Promise]"===Object.prototype.toString.call(e)},addUnit:function(e,t){if("[object String]"===Object.prototype.toString.call(e)){let t=e;t=t.replace("rpx","").replace("upx","").replace("px",""),-1===e.indexOf("rpx")&&-1===e.indexOf("upx")&&-1!==e.indexOf("px")&&(t=2*parseFloat(t)),e=t}return"rpx"===t?e+"rpx":e/2+"px"},deepCopy:function e(t){if("object"!=typeof t||null===t)return t;let i=Array.isArray(t)?[]:{};for(let o in t)t.hasOwnProperty(o)&&(i[o]=e(t[o]));return i},rpx2px:re},ne={LoadingType:{Refresher:0,LoadingMore:1},Refresher:{Default:0,ReleaseToRefresh:1,Loading:2,Complete:3,GoF2:4},More:{Default:0,Loading:1,NoMore:2,Fail:3},QueryFrom:{UserPullDown:0,Reload:1,Refresh:2,LoadingMore:3},CellHeightMode:{Fixed:"fixed",Dynamic:"dynamic"},CacheMode:{Default:"default",Always:"always"}};const de=d({name:"z-paging-refresh",data:()=>({R:ne.Refresher,isIos:"ios"===c().platform,refresherTimeText:"",zTheme:{title:{white:"#efefef",black:"#555555"},arrow:{white:U.base64ArrowWhite,black:U.base64Arrow},flower:{white:U.base64FlowerWhite,black:U.base64Flower},success:{white:U.base64SuccessWhite,black:U.base64Success},indicator:{white:"#eeeeee",black:"#777777"}}}),props:["status","defaultThemeStyle","defaultText","pullingText","refreshingText","completeText","goF2Text","defaultImg","pullingImg","refreshingImg","completeImg","refreshingAnimated","showUpdateTime","updateTimeKey","imgStyle","titleStyle","updateTimeStyle","updateTimeTextMap","unit"],computed:{ts(){return this.defaultThemeStyle},statusTextArr(){return this.updateTime(),[this.defaultText,this.pullingText,this.refreshingText,this.completeText,this.goF2Text]},currentTitle(){return this.statusTextArr[this.status]||this.defaultText},leftImageClass(){const e=`zp-r-left-image-pre-size-${this.unit}`;return this.status===this.R.Complete?e:`zp-r-left-image ${e} ${this.status===this.R.Default?"zp-r-arrow-down":"zp-r-arrow-top"}`},leftImageStyle(){const e=this.showUpdateTime,t=e?he.addUnit(36,this.unit):he.addUnit(34,this.unit);return{width:t,height:t,"margin-right":e?he.addUnit(20,this.unit):he.addUnit(9,this.unit)}},leftImageSrc(){const e=this.R,t=this.status;return t===e.Default?this.defaultImg?this.defaultImg:this.zTheme.arrow[this.ts]:t===e.ReleaseToRefresh?this.pullingImg?this.pullingImg:this.defaultImg?this.defaultImg:this.zTheme.arrow[this.ts]:t===e.Loading?this.refreshingImg?this.refreshingImg:this.zTheme.flower[this.ts]:t===e.Complete?this.completeImg?this.completeImg:this.zTheme.success[this.ts]:t===e.GoF2?this.zTheme.arrow[this.ts]:""},rightTextStyle(){let e={};return e.color=this.zTheme.title[this.ts],e["font-size"]=he.addUnit(30,this.unit),e}},methods:{addUnit:(e,t)=>he.addUnit(e,t),updateTime(){this.showUpdateTime&&(this.refresherTimeText=he.getRefesrherFormatTimeByKey(this.updateTimeKey,this.updateTimeTextMap))}}},[["render",function(e,t,i,o,s,r){const a=y,l=m,h=R;return g(),u(l,{style:{height:"100%"}},{default:f(()=>[p(l,{class:T(i.showUpdateTime?"zp-r-container zp-r-container-padding":"zp-r-container")},{default:f(()=>[p(l,{class:"zp-r-left"},{default:f(()=>[i.status!==s.R.Loading?(g(),u(a,{key:0,class:T(r.leftImageClass),style:S([r.leftImageStyle,i.imgStyle]),src:r.leftImageSrc},null,8,["class","style","src"])):(g(),u(a,{key:1,class:T({"zp-line-loading-image":i.refreshingAnimated,"zp-r-left-image":!0,"zp-r-left-image-pre-size-rpx":"rpx"===i.unit,"zp-r-left-image-pre-size-px":"px"===i.unit}),style:S([r.leftImageStyle,i.imgStyle]),src:r.leftImageSrc},null,8,["class","style","src"]))]),_:1}),p(l,{class:"zp-r-right"},{default:f(()=>[p(h,{class:"zp-r-right-text",style:S([r.rightTextStyle,i.titleStyle])},{default:f(()=>[C(x(r.currentTitle),1)]),_:1},8,["style"]),i.showUpdateTime&&s.refresherTimeText.length?(g(),u(h,{key:0,class:T(["zp-r-right-text",{"zp-r-right-time-text-rpx":"rpx"===i.unit,"zp-r-right-time-text-px":"px"===i.unit}]),style:S([{color:s.zTheme.title[r.ts]},i.updateTimeStyle])},{default:f(()=>[C(x(s.refresherTimeText),1)]),_:1},8,["class","style"])):w("",!0)]),_:1})]),_:1},8,["class"])]),_:1})}],["__scopeId","data-v-ffab5190"]]);const ce=d({name:"z-paging-load-more",data:()=>({M:ne.More,zTheme:{title:{white:"#efefef",black:"#a4a4a4"},line:{white:"#efefef",black:"#eeeeee"},circleBorder:{white:"#aaaaaa",black:"#c8c8c8"},circleBorderTop:{white:"#ffffff",black:"#444444"},flower:{white:U.base64FlowerWhite,black:U.base64Flower},indicator:{white:"#eeeeee",black:"#777777"}}}),props:["zConfig"],computed:{ts(){return this.c.defaultThemeStyle},c(){return this.zConfig||{}},ownLoadingMoreText(){return[this.c.defaultText,this.c.loadingText,this.c.noMoreText,this.c.failText][this.finalStatus]},finalStatus(){return this.c.defaultAsLoading&&this.c.status===this.M.Default?this.M.Loading:this.c.status},finalLoadingIconType(){return this.c.loadingIconType}},methods:{doClick(){this.$emit("doClick")}}},[["render",function(e,t,i,o,s,r){const a=R,l=y,h=m;return g(),u(h,{class:T(["zp-l-container",{"zp-l-container-rpx":"rpx"===r.c.unit,"zp-l-container-px":"px"===r.c.unit}]),style:S([r.c.customStyle]),onClick:r.doClick},{default:f(()=>[r.c.hideContent?w("",!0):(g(),M(b,{key:0},[r.c.showNoMoreLine&&r.finalStatus===s.M.NoMore?(g(),u(a,{key:0,class:T({"zp-l-line-rpx":"rpx"===r.c.unit,"zp-l-line-px":"px"===r.c.unit}),style:S([{backgroundColor:s.zTheme.line[r.ts]},r.c.noMoreLineCustomStyle])},null,8,["class","style"])):w("",!0),r.finalStatus===s.M.Loading&&r.c.loadingIconCustomImage?(g(),u(l,{key:1,src:r.c.loadingIconCustomImage,style:S([r.c.iconCustomStyle]),class:T({"zp-l-line-loading-custom-image":!0,"zp-l-line-loading-custom-image-animated":r.c.loadingAnimated,"zp-l-line-loading-custom-image-rpx":"rpx"===r.c.unit,"zp-l-line-loading-custom-image-px":"px"===r.c.unit})},null,8,["src","style","class"])):w("",!0),r.finalStatus!==s.M.Loading||"flower"!==r.finalLoadingIconType||r.c.loadingIconCustomImage.length?w("",!0):(g(),u(l,{key:2,class:T({"zp-line-loading-image":!0,"zp-line-loading-image-rpx":"rpx"===r.c.unit,"zp-line-loading-image-px":"px"===r.c.unit}),style:S([r.c.iconCustomStyle]),src:s.zTheme.flower[r.ts]},null,8,["class","style","src"])),r.finalStatus!==s.M.Loading||"circle"!==r.finalLoadingIconType||r.c.loadingIconCustomImage.length?w("",!0):(g(),u(a,{key:3,class:T(["zp-l-circle-loading-view",{"zp-l-circle-loading-view-rpx":"rpx"===r.c.unit,"zp-l-circle-loading-view-px":"px"===r.c.unit}]),style:S([{borderColor:s.zTheme.circleBorder[r.ts],borderTopColor:s.zTheme.circleBorderTop[r.ts]},r.c.iconCustomStyle])},null,8,["class","style"])),!r.c.isChat||!r.c.chatDefaultAsLoading&&r.finalStatus===s.M.Default||r.finalStatus===s.M.Fail?(g(),u(a,{key:4,class:T({"zp-l-text-rpx":"rpx"===r.c.unit,"zp-l-text-px":"px"===r.c.unit}),style:S([{color:s.zTheme.title[r.ts]},r.c.titleCustomStyle])},{default:f(()=>[C(x(r.ownLoadingMoreText),1)]),_:1},8,["class","style"])):w("",!0),r.c.showNoMoreLine&&r.finalStatus===s.M.NoMore?(g(),u(a,{key:5,class:T({"zp-l-line-rpx":"rpx"===r.c.unit,"zp-l-line-px":"px"===r.c.unit}),style:S([{backgroundColor:s.zTheme.line[r.ts]},r.c.noMoreLineCustomStyle])},null,8,["class","style"])):w("",!0)],64))]),_:1},8,["class","style","onClick"])}],["__scopeId","data-v-f0918128"]]),ue="Query",ge="FetchParams",fe="FetchResult",pe="Language2Local";function me(){return L()}function Te(){return me()&&me().globalData}function ye(e,t){try{setTimeout(function(){Te()&&(me().globalData[`zp_handle${e}Callback`]=t)},1)}catch(i){}}function Se(e){return Te()?me().globalData[`zp_handle${e}Callback`]:null}const we={handleQuery:function(e){return ye(ue,e),this},_handleQuery:function(e,t,i,o){const s=Se(ue);return s?s(e,t,i,o):[e,t,i]},handleFetchParams:function(e){return ye(ge,e),this},_handleFetchParams:function(e,t){const i=Se(ge);return i?i(e,t||{}):r({pageNo:e.pageNo,pageSize:e.pageSize},t||{})},handleFetchResult:function(e){return ye(fe,e),this},_handleFetchResult:function(e,t,i){const o=Se(fe);return o&&o(e,t,i),!!o},handleLanguage2Local:function(e){return ye(pe,e),this},_handleLanguage2Local:function(e,t){const i=Se(pe);return i?i(e,t):t}},Re={props:{defaultPageNo:{type:[Number,String],default:he.gc("defaultPageNo",1),observer:function(e){this.pageNo=e}},defaultPageSize:{type:[Number,String],default:he.gc("defaultPageSize",10),validator:e=>(e<=0&&he.consoleErr("default-page-size必须大于0！"),e>0)},dataKey:{type:[Number,String,Object],default:he.gc("dataKey",null)},useCache:{type:Boolean,default:he.gc("useCache",!1)},cacheKey:{type:String,default:he.gc("cacheKey",null)},cacheMode:{type:String,default:he.gc("cacheMode",ne.CacheMode.Default)},autowireListName:{type:String,default:he.gc("autowireListName","")},autowireQueryName:{type:String,default:he.gc("autowireQueryName","")},fetch:{type:Function,default:null},fetchParams:{type:Object,default:he.gc("fetchParams",null)},auto:{type:Boolean,default:he.gc("auto",!0)},reloadWhenRefresh:{type:Boolean,default:he.gc("reloadWhenRefresh",!0)},autoScrollToTopWhenReload:{type:Boolean,default:he.gc("autoScrollToTopWhenReload",!0)},autoCleanListWhenReload:{type:Boolean,default:he.gc("autoCleanListWhenReload",!0)},showRefresherWhenReload:{type:Boolean,default:he.gc("showRefresherWhenReload",!1)},showLoadingMoreWhenReload:{type:Boolean,default:he.gc("showLoadingMoreWhenReload",!1)},createdReload:{type:Boolean,default:he.gc("createdReload",!1)},localPagingLoadingTime:{type:[Number,String],default:he.gc("localPagingLoadingTime",200)},concat:{type:Boolean,default:he.gc("concat",!0)},callNetworkReject:{type:Boolean,default:he.gc("callNetworkReject",!0)},value:{type:Array,default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}}},data:()=>({currentData:[],totalData:[],realTotalData:[],totalLocalPagingList:[],dataPromiseResultMap:{reload:null,complete:null,localPaging:null},isSettingCacheList:!1,pageNo:1,currentRefreshPageSize:0,isLocalPaging:!1,isAddedData:!1,isTotalChangeFromAddData:!1,privateConcat:!0,myParentQuery:-1,firstPageLoaded:!1,pagingLoaded:!1,loaded:!1,isUserReload:!0,fromEmptyViewReload:!1,queryFrom:"",listRendering:!1,isHandlingRefreshToPage:!1,isFirstPageAndNoMore:!1,totalDataChangeThrow:!0}),computed:{pageSize(){return this.defaultPageSize},finalConcat(){return this.concat&&this.privateConcat},finalUseCache(){return this.useCache&&!this.cacheKey&&he.consoleErr("use-cache为true时，必须设置cache-key，否则缓存无效！"),this.useCache&&!!this.cacheKey},finalCacheKey(){return this.cacheKey?`${G}-${this.cacheKey}`:null},isFirstPage(){return this.pageNo===this.defaultPageNo}},watch:{totalData(e,t){this._totalDataChange(e,t,this.totalDataChangeThrow),this.totalDataChangeThrow=!0},currentData(e,t){this._currentDataChange(e,t)},useChatRecordMode(e,t){e&&(this.nLoadingMoreFixedHeight=!1)},value:{handler(e){e!==this.totalData&&(this.totalDataChangeThrow=!1,this.totalData=e)},immediate:!0},modelValue:{handler(e){e!==this.totalData&&(this.totalDataChangeThrow=!1,this.totalData=e)},immediate:!0}},methods:{complete(e,t=!0){return this.customNoMore=-1,this.addData(e,t)},completeByKey(e,t=null,i=!0){return null!==t&&null!==this.dataKey&&t!==this.dataKey?(this.isFirstPage&&this.endRefresh(),new Promise(e=>e())):(this.customNoMore=-1,this.addData(e,i))},completeByTotal(e,t,i=!0){if("undefined"==t)this.customNoMore=-1;else{const o=this._checkDataType(e,i,!1);if(e=o.data,i=o.success,t>=0&&i)return new Promise((o,s)=>{this.$nextTick(()=>{let r=!1;let a=(this.pageNo==this.defaultPageNo?0:this.realTotalData.length)+(this.privateConcat?e.length:0)-t;a>=0&&(r=!0,a=this.defaultPageSize-a,this.privateConcat&&a>0&&a<e.length&&(e=e.splice(0,a))),this.completeByNoMore(e,r,i).then(e=>o(e)).catch(()=>s())})})}return this.addData(e,i)},completeByNoMore(e,t,i=!0){return"undefined"!=t&&(this.customNoMore=1==t?1:0),this.addData(e,i)},completeByError(e){return this.customerEmptyViewErrorText=e,this.complete(!1)},addData(e,t=!0){this.fromCompleteEmit||(this.disabledCompleteEmit=!0,this.fromCompleteEmit=!1);const i=he.getTime()-this.requestTimeStamp;let o=this.minDelay;this.isFirstPage&&this.finalShowRefresherWhenReload&&(o=Math.max(400,o));const s=this.requestTimeStamp>0&&i<o?o-i:0;return this.$nextTick(()=>{he.delay(()=>{this._addData(e,t,!1)},this.delay>0?this.delay:s)}),new Promise((e,t)=>{this.dataPromiseResultMap.complete={resolve:e,reject:t}})},addDataFromTop(e,t=!0,i=!0){let o=!this.isChatRecordModeAndNotInversion;e="[object Array]"!==Object.prototype.toString.call(e)?[e]:o?e.reverse():e,this.finalUseVirtualList&&this._setCellIndex(e,"top"),this.totalData=o?[...e,...this.totalData]:[...this.totalData,...e],t&&he.delay(()=>this.useChatRecordMode?this.scrollToBottom(i):this.scrollToTop(i))},resetTotalData(e){this.isTotalChangeFromAddData=!0,e="[object Array]"!==Object.prototype.toString.call(e)?[e]:e,this.totalData=e},setLocalPaging(e,t=!0){return this.isLocalPaging=!0,this.$nextTick(()=>{this._addData(e,t,!0)}),new Promise((e,t)=>{this.dataPromiseResultMap.localPaging={resolve:e,reject:t}})},reload(e=this.showRefresherWhenReload){return e&&(this.privateShowRefresherWhenReload=e,this.isUserPullDown=!0),this.showLoadingMoreWhenReload||(this.listRendering=!0),this.$nextTick(()=>{this._preReload(e,!1)}),new Promise((e,t)=>{this.dataPromiseResultMap.reload={resolve:e,reject:t}})},refresh(){return this._handleRefreshWithDisPageNo(this.pageNo-this.defaultPageNo+1)},refreshToPage(e){return this.isHandlingRefreshToPage=!0,this._handleRefreshWithDisPageNo(e+this.defaultPageNo-1)},updateCache(){this.finalUseCache&&this.totalData.length&&this._saveLocalCache(this.totalData.slice(0,Math.min(this.totalData.length,this.pageSize)))},clean(){this._reload(!0),this._addData([],!0,!1)},clear(){this.clean()},_preReload(e=this.showRefresherWhenReload,t=!0,i=0){const o=this.finalRefresherEnabled&&this.useCustomRefresher;-1===this.customRefresherHeight&&o?he.delay(()=>{++i%10==0&&this._updateCustomRefresherHeight(),this._preReload(e,t,i)},K/2):(this.isUserReload=!0,this.loadingType=ne.LoadingType.Refresher,e?(this.privateShowRefresherWhenReload=e,this.useCustomRefresher?this._doRefresherRefreshAnimate():this.refresherTriggered=!0):this._refresherEnd(!1,!1,!1,!1),this._reload(!1,t))},_reload(e=!1,t=!1,i=!1){if(this.isAddedData=!1,this.insideOfPaging=-1,this.cacheScrollNodeHeight=-1,this.pageNo=this.defaultPageNo,this._cleanRefresherEndTimeout(),!this.privateShowRefresherWhenReload&&!e&&this._startLoading(!0),this.firstPageLoaded=!0,this.isTotalChangeFromAddData=!1,this.isSettingCacheList||(this.totalData=[]),!e){this._emitQuery(this.pageNo,this.defaultPageSize,i?ne.QueryFrom.UserPullDown:ne.QueryFrom.Reload);let e=0;he.delay(this._callMyParentQuery,e),!t&&this.autoScrollToTopWhenReload&&this._scrollToTop(!1)}},_addData(e,t,i){this.isAddedData=!0,this.fromEmptyViewReload=!1,this.isTotalChangeFromAddData=!0,this.refresherTriggered=!1,this._endSystemLoadingAndRefresh();const o=this.isUserPullDown;this.showRefresherUpdateTime&&this.isFirstPage&&(he.setRefesrherTime(he.getTime(),this.refresherUpdateTimeKey),this.$refs.refresh&&this.$refs.refresh.updateTime()),!i&&o&&this.isFirstPage&&(this.isUserPullDown=!1),this.isFirstPage?this.listRendering=!1:(this.listRendering=!0,this.$nextTick(()=>{he.delay(()=>this.listRendering=!1)}));let s=this._checkDataType(e,t,i);e=s.data,t=s.success;let r=K;if(this.useChatRecordMode&&(r=0),this.loadingForNow=!1,he.delay(()=>{this.pagingLoaded=!0,this.$nextTick(()=>{!i&&this._refresherEnd(r>0,!0,o)})}),this.isFirstPage&&(this.isLoadFailed=!t,this.$emit("isLoadFailedChange",this.isLoadFailed),this.finalUseCache&&t&&(this.cacheMode===ne.CacheMode.Always||this.isSettingCacheList)&&this._saveLocalCache(e)),this.isSettingCacheList=!1,t){if((!1!==this.privateConcat||this.isHandlingRefreshToPage||this.loadingStatus!==ne.More.NoMore)&&(this.loadingStatus=ne.More.Default),i){this.totalLocalPagingList=e;const t=this.defaultPageNo,i=this.queryFrom!==ne.QueryFrom.Refresh?this.defaultPageSize:this.currentRefreshPageSize;this._localPagingQueryList(t,i,0,e=>{he.delay(()=>{this.completeByTotal(e,this.totalLocalPagingList.length)},0)})}else{let t=0;he.delay(()=>{this._currentDataChange(e,this.currentData),this._callDataPromise(!0,this.totalData)},t)}this.isHandlingRefreshToPage&&(this.isHandlingRefreshToPage=!1,this.pageNo=this.defaultPageNo+Math.ceil(e.length/this.pageSize)-1,e.length%this.pageSize!==0&&(this.customNoMore=1))}else this._currentDataChange(e,this.currentData),this._callDataPromise(!1),this.loadingStatus=ne.More.Fail,this.isHandlingRefreshToPage=!1,this.loadingType===ne.LoadingType.LoadingMore&&this.pageNo--},_totalDataChange(e,t,i=!0){(this.isUserReload&&this.autoCleanListWhenReload||!this.firstPageLoaded||e.length||!t.length)&&(this._doCheckScrollViewShouldFullHeight(e),this.realTotalData.length||e.length||(i=!1),this.realTotalData=e,i&&(this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("update:list",e),this.$emit("listChange",e),this._callMyParentList(e)),this.firstPageLoaded=!1,this.isTotalChangeFromAddData=!1,this.$nextTick(()=>{he.delay(()=>{this._getNodeClientRect(".zp-paging-container-content").then(e=>{e&&this.$emit("contentHeightChanged",e[0].height)})},K*(this.isIos?1:3))}))},_currentDataChange(e,t){e=[...e],this.finalUseVirtualList&&this._setCellIndex(e,"bottom"),this.isFirstPage&&this.finalConcat&&(this.totalData=[]),-1!==this.customNoMore?(1===this.customNoMore||0!==this.customNoMore&&!e.length)&&(this.loadingStatus=ne.More.NoMore):(!e.length||e.length&&e.length<this.defaultPageSize)&&(this.loadingStatus=ne.More.NoMore),this.totalData.length&&this.finalConcat?(this.oldScrollTop,this.totalData=[...this.totalData,...e]):this.totalData=e,this.privateConcat=!0},_handleRefreshWithDisPageNo(e){if(!this.isHandlingRefreshToPage&&!this.realTotalData.length)return this.reload();if(e>=1){this.loading=!0,this.privateConcat=!1;const t=e*this.pageSize;this.currentRefreshPageSize=t,this.isLocalPaging&&this.isHandlingRefreshToPage?this._localPagingQueryList(this.defaultPageNo,t,0,e=>{this.complete(e)}):(this._emitQuery(this.defaultPageNo,t,ne.QueryFrom.Refresh),this._callMyParentQuery(this.defaultPageNo,t))}return new Promise((e,t)=>{this.dataPromiseResultMap.reload={resolve:e,reject:t}})},_localPagingQueryList(e,t,i,o){e=Math.max(1,e),t=Math.max(1,t);const s=[...this.totalLocalPagingList],r=(e-1)*t,a=Math.min(s.length,r+t),l=s.splice(r,a-r);he.delay(()=>o(l),i)},_saveLocalCache(e){h(this.finalCacheKey,e)},_setListByLocalCache(){this.totalData=n(this.finalCacheKey)||[],this.isSettingCacheList=!0},_callMyParentList(e){if(this.autowireListName.length){const t=he.getParent(this.$parent);t&&t[this.autowireListName]&&(t[this.autowireListName]=e)}},_callMyParentQuery(e=0,t=0){if(this.autowireQueryName){if(-1===this.myParentQuery){const e=he.getParent(this.$parent);e&&e[this.autowireQueryName]&&(this.myParentQuery=e[this.autowireQueryName])}-1!==this.myParentQuery&&(t>0?this.myParentQuery(e,t):this.myParentQuery(this.pageNo,this.defaultPageSize))}},_emitQuery(e,t,i){this.queryFrom=i,this.requestTimeStamp=he.getTime();const[o]=this.realTotalData.slice(-1);if(this.fetch){const s=we._handleFetchParams({pageNo:e,pageSize:t,from:i,lastItem:o||null},this.fetchParams),r=this.fetch(s);we._handleFetchResult(r,this,s)||(he.isPromise(r)?r.then(e=>{this.complete(e)}).catch(e=>{this.complete(!1)}):this.complete(r))}else this.$emit("query",...we._handleQuery(e,t,i,o||null))},_callDataPromise(e,t){for(const i in this.dataPromiseResultMap){const o=this.dataPromiseResultMap[i];o&&(e?o.resolve({totalList:t,noMore:this.loadingStatus===ne.More.NoMore}):this.callNetworkReject&&o.reject(`z-paging-${i}-error`))}},_checkDataType(e,t,i){const o=Object.prototype.toString.call(e);return"[object Boolean]"===o?(t=e,e=[]):"[object Array]"!==o&&(e=[],"[object Undefined]"!==o&&"[object Null]"!==o&&he.consoleErr((i?"setLocalPaging":"complete")+"参数类型不正确，第一个参数类型必须为Array!")),{data:e,success:t}}}},Ce={en:{"zp.refresher.default":"Pull down to refresh","zp.refresher.pulling":"Release to refresh","zp.refresher.refreshing":"Refreshing...","zp.refresher.complete":"Refresh succeeded","zp.refresher.f2":"Refresh to enter 2f","zp.loadingMore.default":"Click to load more","zp.loadingMore.loading":"Loading...","zp.loadingMore.noMore":"No more data","zp.loadingMore.fail":"Load failed,click to reload","zp.emptyView.title":"No data","zp.emptyView.reload":"Reload","zp.emptyView.error":"Sorry,load failed","zp.refresherUpdateTime.title":"Last update: ","zp.refresherUpdateTime.none":"None","zp.refresherUpdateTime.today":"Today","zp.refresherUpdateTime.yesterday":"Yesterday","zp.systemLoading.title":"Loading..."},"zh-Hans":{"zp.refresher.default":"继续下拉刷新","zp.refresher.pulling":"松开立即刷新","zp.refresher.refreshing":"正在刷新...","zp.refresher.complete":"刷新成功","zp.refresher.f2":"松手进入二楼","zp.loadingMore.default":"点击加载更多","zp.loadingMore.loading":"正在加载...","zp.loadingMore.noMore":"没有更多了","zp.loadingMore.fail":"加载失败，点击重新加载","zp.emptyView.title":"没有数据哦~","zp.emptyView.reload":"重新加载","zp.emptyView.error":"很抱歉，加载失败","zp.refresherUpdateTime.title":"最后更新：","zp.refresherUpdateTime.none":"无","zp.refresherUpdateTime.today":"今天","zp.refresherUpdateTime.yesterday":"昨天","zp.systemLoading.title":"加载中..."},"zh-Hant":{"zp.refresher.default":"繼續下拉重繪","zp.refresher.pulling":"鬆開立即重繪","zp.refresher.refreshing":"正在重繪...","zp.refresher.complete":"重繪成功","zp.refresher.f2":"鬆手進入二樓","zp.loadingMore.default":"點擊加載更多","zp.loadingMore.loading":"正在加載...","zp.loadingMore.noMore":"沒有更多了","zp.loadingMore.fail":"加載失敗，點擊重新加載","zp.emptyView.title":"沒有數據哦~","zp.emptyView.reload":"重新加載","zp.emptyView.error":"很抱歉，加載失敗","zp.refresherUpdateTime.title":"最後更新：","zp.refresherUpdateTime.none":"無","zp.refresherUpdateTime.today":"今天","zp.refresherUpdateTime.yesterday":"昨天","zp.systemLoading.title":"加載中..."}},{t:xe}=v(Ce),Me=c().language,be={data:()=>({language:Me}),computed:{finalLanguage(){try{const e=_(),t=this.language;return"auto"===e?we._handleLanguage2Local(t,this._language2Local(t)):e}catch(e){return"zh-Hans"}},finalRefresherDefaultText(){return this._getI18nText("zp.refresher.default",this.refresherDefaultText)},finalRefresherPullingText(){return this._getI18nText("zp.refresher.pulling",this.refresherPullingText)},finalRefresherRefreshingText(){return this._getI18nText("zp.refresher.refreshing",this.refresherRefreshingText)},finalRefresherCompleteText(){return this._getI18nText("zp.refresher.complete",this.refresherCompleteText)},finalRefresherUpdateTimeTextMap:()=>({title:xe("zp.refresherUpdateTime.title"),none:xe("zp.refresherUpdateTime.none"),today:xe("zp.refresherUpdateTime.today"),yesterday:xe("zp.refresherUpdateTime.yesterday")}),finalRefresherGoF2Text(){return this._getI18nText("zp.refresher.f2",this.refresherGoF2Text)},finalLoadingMoreDefaultText(){return this._getI18nText("zp.loadingMore.default",this.loadingMoreDefaultText)},finalLoadingMoreLoadingText(){return this._getI18nText("zp.loadingMore.loading",this.loadingMoreLoadingText)},finalLoadingMoreNoMoreText(){return this._getI18nText("zp.loadingMore.noMore",this.loadingMoreNoMoreText)},finalLoadingMoreFailText(){return this._getI18nText("zp.loadingMore.fail",this.loadingMoreFailText)},finalEmptyViewText(){return this.isLoadFailed?this.finalEmptyViewErrorText:this._getI18nText("zp.emptyView.title",this.emptyViewText)},finalEmptyViewReloadText(){return this._getI18nText("zp.emptyView.reload",this.emptyViewReloadText)},finalEmptyViewErrorText(){return this.customerEmptyViewErrorText||this._getI18nText("zp.emptyView.error",this.emptyViewErrorText)},finalSystemLoadingText(){return this._getI18nText("zp.systemLoading.title",this.systemLoadingText)}},methods:{getLanguage(){return this.finalLanguage},_getI18nText(e,t){const i=Object.prototype.toString.call(t);if("[object Object]"===i){const e=t[this.finalLanguage];if(e)return e}else if("[object String]"===i)return t;return xe(e)},_language2Local(e){const t=e.toLowerCase().replace(new RegExp("_",""),"-");return-1!==t.indexOf("zh")?"zh"===t||"zh-cn"===t||-1!==t.indexOf("zh-hans")?"zh-Hans":"zh-Hant":-1!==t.indexOf("en")?"en":e}}},Le={props:{},data:()=>({nRefresherLoading:!1,nListIsDragging:!1,nShowBottom:!0,nFixFreezing:!1,nShowRefresherReveal:!1,nLoadingMoreFixedHeight:!1,nShowRefresherRevealHeight:0,nOldShowRefresherRevealHeight:-1,nRefresherWidth:he.rpx2px(750),nF2Opacity:0}),computed:{},mounted(){},methods:{}},ve={props:{hideEmptyView:{type:Boolean,default:he.gc("hideEmptyView",!1)},emptyViewText:{type:[String,Object],default:he.gc("emptyViewText",null)},showEmptyViewReload:{type:Boolean,default:he.gc("showEmptyViewReload",!1)},showEmptyViewReloadWhenError:{type:Boolean,default:he.gc("showEmptyViewReloadWhenError",!0)},emptyViewReloadText:{type:[String,Object],default:he.gc("emptyViewReloadText",null)},emptyViewImg:{type:String,default:he.gc("emptyViewImg","")},emptyViewErrorText:{type:[String,Object],default:he.gc("emptyViewErrorText",null)},emptyViewErrorImg:{type:String,default:he.gc("emptyViewErrorImg","")},emptyViewStyle:{type:Object,default:he.gc("emptyViewStyle",{})},emptyViewSuperStyle:{type:Object,default:he.gc("emptyViewSuperStyle",{})},emptyViewImgStyle:{type:Object,default:he.gc("emptyViewImgStyle",{})},emptyViewTitleStyle:{type:Object,default:he.gc("emptyViewTitleStyle",{})},emptyViewReloadStyle:{type:Object,default:he.gc("emptyViewReloadStyle",{})},emptyViewFixed:{type:Boolean,default:he.gc("emptyViewFixed",!1)},emptyViewCenter:{type:Boolean,default:he.gc("emptyViewCenter",!0)},autoHideEmptyViewWhenLoading:{type:Boolean,default:he.gc("autoHideEmptyViewWhenLoading",!0)},autoHideEmptyViewWhenPull:{type:Boolean,default:he.gc("autoHideEmptyViewWhenPull",!0)},emptyViewZIndex:{type:Number,default:he.gc("emptyViewZIndex",9)}},data:()=>({customerEmptyViewErrorText:""}),computed:{finalEmptyViewImg(){return this.isLoadFailed?this.emptyViewErrorImg:this.emptyViewImg},finalShowEmptyViewReload(){return this.isLoadFailed?this.showEmptyViewReloadWhenError:this.showEmptyViewReload},showEmpty(){return!(this.refresherOnly||this.hideEmptyView||this.realTotalData.length)&&(!this.autoHideEmptyViewWhenLoading||(!(!this.isAddedData||this.firstPageLoaded||this.loading)||!this.autoHideEmptyViewWhenPull&&!this.isUserReload))}},methods:{_emptyViewReload(){let e=!1;this.$emit("emptyViewReload",t=>{void 0!==t&&!0!==t||(this.fromEmptyViewReload=!0,this.reload().catch(()=>{})),e=!0}),this.$nextTick(()=>{e||(this.fromEmptyViewReload=!0,this.reload().catch(()=>{}))})},_emptyViewClick(){this.$emit("emptyViewClick")}}},_e={props:{refresherThemeStyle:{type:String,default:he.gc("refresherThemeStyle","")},refresherImgStyle:{type:Object,default:he.gc("refresherImgStyle",{})},refresherTitleStyle:{type:Object,default:he.gc("refresherTitleStyle",{})},refresherUpdateTimeStyle:{type:Object,default:he.gc("refresherUpdateTimeStyle",{})},watchRefresherTouchmove:{type:Boolean,default:he.gc("watchRefresherTouchmove",!1)},loadingMoreThemeStyle:{type:String,default:he.gc("loadingMoreThemeStyle","")},refresherOnly:{type:Boolean,default:he.gc("refresherOnly",!1)},refresherDefaultDuration:{type:[Number,String],default:he.gc("refresherDefaultDuration",100)},refresherCompleteDelay:{type:[Number,String],default:he.gc("refresherCompleteDelay",0)},refresherCompleteDuration:{type:[Number,String],default:he.gc("refresherCompleteDuration",300)},refresherRefreshingScrollable:{type:Boolean,default:he.gc("refresherRefreshingScrollable",!0)},refresherCompleteScrollable:{type:Boolean,default:he.gc("refresherCompleteScrollable",!1)},useCustomRefresher:{type:Boolean,default:he.gc("useCustomRefresher",!0)},refresherFps:{type:[Number,String],default:he.gc("refresherFps",40)},refresherMaxAngle:{type:[Number,String],default:he.gc("refresherMaxAngle",40)},refresherAngleEnableChangeContinued:{type:Boolean,default:he.gc("refresherAngleEnableChangeContinued",!1)},refresherDefaultText:{type:[String,Object],default:he.gc("refresherDefaultText",null)},refresherPullingText:{type:[String,Object],default:he.gc("refresherPullingText",null)},refresherRefreshingText:{type:[String,Object],default:he.gc("refresherRefreshingText",null)},refresherCompleteText:{type:[String,Object],default:he.gc("refresherCompleteText",null)},refresherGoF2Text:{type:[String,Object],default:he.gc("refresherGoF2Text",null)},refresherDefaultImg:{type:String,default:he.gc("refresherDefaultImg",null)},refresherPullingImg:{type:String,default:he.gc("refresherPullingImg",null)},refresherRefreshingImg:{type:String,default:he.gc("refresherRefreshingImg",null)},refresherCompleteImg:{type:String,default:he.gc("refresherCompleteImg",null)},refresherRefreshingAnimated:{type:Boolean,default:he.gc("refresherRefreshingAnimated",!0)},refresherEndBounceEnabled:{type:Boolean,default:he.gc("refresherEndBounceEnabled",!0)},refresherEnabled:{type:Boolean,default:he.gc("refresherEnabled",!0)},refresherThreshold:{type:[Number,String],default:he.gc("refresherThreshold","80rpx")},refresherDefaultStyle:{type:String,default:he.gc("refresherDefaultStyle","black")},refresherBackground:{type:String,default:he.gc("refresherBackground","transparent")},refresherFixedBackground:{type:String,default:he.gc("refresherFixedBackground","transparent")},refresherFixedBacHeight:{type:[Number,String],default:he.gc("refresherFixedBacHeight",0)},refresherOutRate:{type:Number,default:he.gc("refresherOutRate",.65)},refresherF2Enabled:{type:Boolean,default:he.gc("refresherF2Enabled",!1)},refresherF2Threshold:{type:[Number,String],default:he.gc("refresherF2Threshold","200rpx")},refresherF2Duration:{type:[Number,String],default:he.gc("refresherF2Duration",200)},showRefresherF2:{type:Boolean,default:he.gc("showRefresherF2",!0)},refresherPullRate:{type:Number,default:he.gc("refresherPullRate",.75)},showRefresherUpdateTime:{type:Boolean,default:he.gc("showRefresherUpdateTime",!1)},refresherUpdateTimeKey:{type:String,default:he.gc("refresherUpdateTimeKey","default")},refresherVibrate:{type:Boolean,default:he.gc("refresherVibrate",!1)},refresherNoTransform:{type:Boolean,default:he.gc("refresherNoTransform",!1)},useRefresherStatusBarPlaceholder:{type:Boolean,default:he.gc("useRefresherStatusBarPlaceholder",!1)}},data:()=>({R:ne.Refresher,refresherStatus:ne.Refresher.Default,refresherTouchstartY:0,lastRefresherTouchmove:null,refresherReachMaxAngle:!0,refresherTransform:"translateY(0px)",refresherTransition:"",finalRefresherDefaultStyle:"black",refresherRevealStackCount:0,refresherCompleteTimeout:null,refresherCompleteSubTimeout:null,refresherEndTimeout:null,isTouchmovingTimeout:null,refresherTriggered:!1,isTouchmoving:!1,isTouchEnded:!1,isUserPullDown:!1,privateRefresherEnabled:-1,privateShowRefresherWhenReload:!1,customRefresherHeight:-1,showCustomRefresher:!1,doRefreshAnimateAfter:!1,isRefresherInComplete:!1,showF2:!1,f2Transform:"",pullDownTimeStamp:0,moveDis:0,oldMoveDis:0,currentDis:0,oldCurrentMoveDis:0,oldRefresherTouchmoveY:0,oldTouchDirection:"",oldEmitedTouchDirection:"",oldPullingDistance:-1,refresherThresholdUpdateTag:0}),watch:{refresherDefaultStyle:{handler(e){e.length&&(this.finalRefresherDefaultStyle=e)},immediate:!0},refresherStatus(e){e===ne.Refresher.Loading&&this._cleanRefresherEndTimeout(),this.refresherVibrate&&(e===ne.Refresher.ReleaseToRefresh||e===ne.Refresher.GoF2)&&this._doVibrateShort(),this.$emit("refresherStatusChange",e),this.$emit("update:refresherStatus",e)},refresherEnabled(e){!e&&this.endRefresh()}},computed:{pullDownDisTimeStamp(){return 1e3/this.refresherFps},refresherThresholdUnitConverted(){return he.addUnit(this.refresherThreshold,this.unit)},finalRefresherEnabled(){return!this.useChatRecordMode&&(-1===this.privateRefresherEnabled?this.refresherEnabled:1===this.privateRefresherEnabled)},finalRefresherThreshold(){let e=this.refresherThresholdUnitConverted,t=!1;return e===he.addUnit(80,this.unit)&&(t=!0,this.showRefresherUpdateTime&&(e=he.addUnit(120,this.unit))),t&&this.customRefresherHeight>0?this.customRefresherHeight+this.finalRefresherThresholdPlaceholder:he.convertToPx(e)+this.finalRefresherThresholdPlaceholder},finalRefresherF2Threshold(){return he.convertToPx(he.addUnit(this.refresherF2Threshold,this.unit))},finalRefresherThresholdPlaceholder(){return this.useRefresherStatusBarPlaceholder?this.statusBarHeight:0},finalRefresherFixedBacHeight(){return he.convertToPx(this.refresherFixedBacHeight)},finalRefresherThemeStyle(){return this.refresherThemeStyle.length?this.refresherThemeStyle:this.defaultThemeStyle},finalRefresherOutRate(){let e=this.refresherOutRate;return e=Math.max(0,e),e=Math.min(1,e),e},finalRefresherPullRate(){let e=this.refresherPullRate;return e=Math.max(0,e),e},finalRefresherTransform(){return this.refresherNoTransform||"translateY(0px)"===this.refresherTransform?"none":this.refresherTransform},finalShowRefresherWhenReload(){return this.showRefresherWhenReload||this.privateShowRefresherWhenReload},finalRefresherTriggered(){return!(!this.finalRefresherEnabled||this.useCustomRefresher)&&this.refresherTriggered},showRefresher(){const e=this.finalRefresherEnabled||this.useCustomRefresher&&!this.useChatRecordMode;return this.active&&-1===this.customRefresherHeight&&e&&this.updateCustomRefresherHeight(),e},hasTouchmove(){return this.watchRefresherTouchmove}},methods:{endRefresh(){this.totalData=this.realTotalData,this._refresherEnd(),this._endSystemLoadingAndRefresh(),this._handleScrollViewBounce({bounce:!0}),this.$nextTick(()=>{this.refresherTriggered=!1})},updateCustomRefresherHeight(){he.delay(()=>this.$nextTick(this._updateCustomRefresherHeight))},closeF2(){this._handleCloseF2()},_onRefresh(e=!1,t=!0){(!e||this.finalRefresherEnabled&&!this.useCustomRefresher)&&(this.$emit("onRefresh"),this.$emit("Refresh"),this.loading||this.isRefresherInComplete||(this.loadingType=ne.LoadingType.Refresher,this.nShowRefresherReveal||(this.isUserPullDown=t,this.isUserReload=!t,this._startLoading(!0),this.refresherTriggered=!0,this.reloadWhenRefresh&&t&&(this.useChatRecordMode?this._onLoadingMore("click"):this._reload(!1,!1,t)))))},_onRestore(){this.refresherTriggered="restore",this.$emit("onRestore"),this.$emit("Restore")},_handleRefresherTouchstart(e){!this.loading&&this.isTouchEnded&&(this.isTouchmoving=!1),this.loadingType=ne.LoadingType.Refresher,this.isTouchmovingTimeout&&clearTimeout(this.isTouchmovingTimeout),this.isTouchEnded=!1,this.refresherTransition="",this.refresherTouchstartY=e.touchY,this.$emit("refresherTouchstart",this.refresherTouchstartY),this.lastRefresherTouchmove=e,this._cleanRefresherCompleteTimeout(),this._cleanRefresherEndTimeout()},_handleRefresherTouchmove(e,t){this.refresherReachMaxAngle=!0,this.isTouchmovingTimeout&&clearTimeout(this.isTouchmovingTimeout),this.isTouchmoving=!0,this.isTouchEnded=!1,e>=this.finalRefresherThreshold?this.refresherStatus=this.refresherF2Enabled&&e>=this.finalRefresherF2Threshold?ne.Refresher.GoF2:ne.Refresher.ReleaseToRefresh:this.refresherStatus=ne.Refresher.Default,this.moveDis=e},_handleRefresherTouchend(e){this.isTouchmovingTimeout&&clearTimeout(this.isTouchmovingTimeout),this.refresherReachMaxAngle=!0,this.isTouchEnded=!0;const t=this.finalRefresherThreshold;e>=t&&(this.refresherStatus===ne.Refresher.ReleaseToRefresh||this.refresherStatus===ne.Refresher.GoF2)?this.refresherStatus===ne.Refresher.GoF2?(this._handleGoF2(),this._refresherEnd()):(he.delay(()=>{this._emitTouchmove({pullingDistance:t,dy:this.moveDis-t})},.1),this.moveDis=t,this.refresherStatus=ne.Refresher.Loading,this._doRefresherLoad()):(this._refresherEnd(),this.isTouchmovingTimeout=he.delay(()=>{this.isTouchmoving=!1},this.refresherDefaultDuration)),this.scrollEnable=!0,this.$emit("refresherTouchend",e)},_handleListTouchstart(){this.useChatRecordMode&&this.autoHideKeyboardWhenChat&&(P(),this.$emit("hidedKeyboard"))},_handleScrollViewBounce({bounce:e}){this.usePageScroll||this.scrollToTopBounceEnabled||(this.wxsScrollTop<=5?(this.refresherTransition="",this.scrollEnable=e):e&&(this.scrollEnable=e))},_handleWxsPullingDownStatusChange(e){this.wxsOnPullingDown=e,e&&!this.useChatRecordMode&&(this.renderPropScrollTop=0)},_handleWxsPullingDown({moveDis:e,diffDis:t}){this._emitTouchmove({pullingDistance:e,dy:t})},_handleTouchDirectionChange({direction:e}){this.$emit("touchDirectionChange",e)},_handlePropUpdate(){this.wxsPropType=he.getTime().toString()},_refresherEnd(e=!0,t=!1,i=!1,o=!0){if(this.loadingType===ne.LoadingType.Refresher){const e=t&&(i||this.showRefresherWhenReload)?this.refresherCompleteDelay:0,o=e>0?ne.Refresher.Complete:ne.Refresher.Default;if(this.finalShowRefresherWhenReload){const e=this.refresherRevealStackCount;if(this.refresherRevealStackCount--,e>1)return}this._cleanRefresherEndTimeout(),this.refresherEndTimeout=he.delay(()=>{this.refresherStatus=o,o!==ne.Refresher.Complete&&(this.isRefresherInComplete=!1)},this.refresherStatus!==ne.Refresher.Default&&o===ne.Refresher.Default?this.refresherCompleteDuration:0),e>0&&(this.isRefresherInComplete=!0),this._cleanRefresherCompleteTimeout(),this.refresherCompleteTimeout=he.delay(()=>{let e=1;const i=this.refresherEndBounceEnabled&&t?"cubic-bezier(0.19,1.64,0.42,0.72)":"linear";t&&(e=this.refresherEndBounceEnabled?this.refresherCompleteDuration/1e3:this.refresherCompleteDuration/3e3),this.refresherTransition=`transform ${t?e:this.refresherDefaultDuration/1e3}s ${i}`,this.wxsPropType=this.refresherTransition+"end"+he.getTime(),this.moveDis=0,o===ne.Refresher.Complete&&(this.refresherCompleteSubTimeout&&(clearTimeout(this.refresherCompleteSubTimeout),this.refresherCompleteSubTimeout=null),this.refresherCompleteSubTimeout=he.delay(()=>{this.$nextTick(()=>{this.refresherStatus=ne.Refresher.Default,this.isRefresherInComplete=!1})},800*e)),this._emitTouchmove({pullingDistance:0,dy:this.moveDis})},e)}o&&(he.delay(()=>this.loading=!1,e?10:0),i&&this._onRestore())},_handleGoF2(){!this.showF2&&this.refresherF2Enabled&&(this.$emit("refresherF2Change","go"),this.showRefresherF2&&(this.f2Transform=`translateY(${-this.superContentHeight}px)`,this.showF2=!0,he.delay(()=>{this.f2Transform="translateY(0px)"},100,"f2ShowDelay")))},_handleCloseF2(){this.showF2&&this.refresherF2Enabled&&(this.$emit("refresherF2Change","close"),this.showRefresherF2&&(this.f2Transform=`translateY(${-this.superContentHeight}px)`,he.delay(()=>{this.showF2=!1,this.nF2Opacity=0},this.refresherF2Duration,"f2CloseDelay")))},_doRefresherRefreshAnimate(){this._cleanRefresherCompleteTimeout();!this.doRefreshAnimateAfter&&this.finalShowRefresherWhenReload&&-1===this.customRefresherHeight&&this.refresherThreshold===he.addUnit(80,this.unit)?this.doRefreshAnimateAfter=!0:(this.refresherRevealStackCount++,this.wxsPropType="begin"+he.getTime(),this.moveDis=this.finalRefresherThreshold,this.refresherStatus=ne.Refresher.Loading,this.isTouchmoving=!0,this.isTouchmovingTimeout&&clearTimeout(this.isTouchmovingTimeout),this._doRefresherLoad(!1))},_doRefresherLoad(e=!0){this._onRefresh(!1,e),this.loading=!0},_updateCustomRefresherHeight(){this._getNodeClientRect(".zp-custom-refresher-slot-view").then(e=>{this.customRefresherHeight=e?e[0].height:0,this.showCustomRefresher=this.customRefresherHeight>0,this.doRefreshAnimateAfter&&(this.doRefreshAnimateAfter=!1,this._doRefresherRefreshAnimate())})},_emitTouchmove(e){e.viewHeight=this.finalRefresherThreshold,e.rate=e.viewHeight>0?e.pullingDistance/e.viewHeight:0,this.hasTouchmove&&this.oldPullingDistance!==e.pullingDistance&&this.$emit("refresherTouchmove",e),this.oldPullingDistance=e.pullingDistance},_cleanRefresherCompleteTimeout(){this.refresherCompleteTimeout=this._cleanTimeout(this.refresherCompleteTimeout)},_cleanRefresherEndTimeout(){this.refresherEndTimeout=this._cleanTimeout(this.refresherEndTimeout)}}},Pe={props:{loadingMoreCustomStyle:{type:Object,default:he.gc("loadingMoreCustomStyle",{})},loadingMoreTitleCustomStyle:{type:Object,default:he.gc("loadingMoreTitleCustomStyle",{})},loadingMoreLoadingIconCustomStyle:{type:Object,default:he.gc("loadingMoreLoadingIconCustomStyle",{})},loadingMoreLoadingIconType:{type:String,default:he.gc("loadingMoreLoadingIconType","flower")},loadingMoreLoadingIconCustomImage:{type:String,default:he.gc("loadingMoreLoadingIconCustomImage","")},loadingMoreLoadingAnimated:{type:Boolean,default:he.gc("loadingMoreLoadingAnimated",!0)},loadingMoreEnabled:{type:Boolean,default:he.gc("loadingMoreEnabled",!0)},toBottomLoadingMoreEnabled:{type:Boolean,default:he.gc("toBottomLoadingMoreEnabled",!0)},loadingMoreDefaultAsLoading:{type:Boolean,default:he.gc("loadingMoreDefaultAsLoading",!1)},loadingMoreDefaultText:{type:[String,Object],default:he.gc("loadingMoreDefaultText",null)},loadingMoreLoadingText:{type:[String,Object],default:he.gc("loadingMoreLoadingText",null)},loadingMoreNoMoreText:{type:[String,Object],default:he.gc("loadingMoreNoMoreText",null)},loadingMoreFailText:{type:[String,Object],default:he.gc("loadingMoreFailText",null)},hideNoMoreInside:{type:Boolean,default:he.gc("hideNoMoreInside",!1)},hideNoMoreByLimit:{type:Number,default:he.gc("hideNoMoreByLimit",0)},showDefaultLoadingMoreText:{type:Boolean,default:he.gc("showDefaultLoadingMoreText",!0)},showLoadingMoreNoMoreView:{type:Boolean,default:he.gc("showLoadingMoreNoMoreView",!0)},showLoadingMoreNoMoreLine:{type:Boolean,default:he.gc("showLoadingMoreNoMoreLine",!0)},loadingMoreNoMoreLineCustomStyle:{type:Object,default:he.gc("loadingMoreNoMoreLineCustomStyle",{})},insideMore:{type:Boolean,default:he.gc("insideMore",!1)},lowerThreshold:{type:[Number,String],default:he.gc("lowerThreshold","100rpx")}},data:()=>({M:ne.More,loadingStatus:ne.More.Default,loadingStatusAfterRender:ne.More.Default,loadingMoreTimeStamp:0,loadingMoreDefaultSlot:null,showLoadingMore:!1,customNoMore:-1}),computed:{zLoadMoreConfig(){return{status:this.loadingStatusAfterRender,defaultAsLoading:this.loadingMoreDefaultAsLoading||this.useChatRecordMode&&this.chatLoadingMoreDefaultAsLoading,defaultThemeStyle:this.finalLoadingMoreThemeStyle,customStyle:this.loadingMoreCustomStyle,titleCustomStyle:this.loadingMoreTitleCustomStyle,iconCustomStyle:this.loadingMoreLoadingIconCustomStyle,loadingIconType:this.loadingMoreLoadingIconType,loadingIconCustomImage:this.loadingMoreLoadingIconCustomImage,loadingAnimated:this.loadingMoreLoadingAnimated,showNoMoreLine:this.showLoadingMoreNoMoreLine,noMoreLineCustomStyle:this.loadingMoreNoMoreLineCustomStyle,defaultText:this.finalLoadingMoreDefaultText,loadingText:this.finalLoadingMoreLoadingText,noMoreText:this.finalLoadingMoreNoMoreText,failText:this.finalLoadingMoreFailText,hideContent:!this.loadingMoreDefaultAsLoading&&this.listRendering,unit:this.unit,isChat:this.useChatRecordMode,chatDefaultAsLoading:this.chatLoadingMoreDefaultAsLoading}},finalLoadingMoreThemeStyle(){return this.loadingMoreThemeStyle.length?this.loadingMoreThemeStyle:this.defaultThemeStyle},finalLowerThreshold(){return he.convertToPx(this.lowerThreshold)},showLoadingMoreDefault(){return this._showLoadingMore("Default")},showLoadingMoreLoading(){return this._showLoadingMore("Loading")},showLoadingMoreNoMore(){return this._showLoadingMore("NoMore")},showLoadingMoreFail(){return this._showLoadingMore("Fail")},showLoadingMoreCustom(){return this._showLoadingMore("Custom")},loadingMoreFixedHeight(){return he.addUnit("80rpx",this.unit)}},methods:{pageReachBottom(){!this.useChatRecordMode&&this.toBottomLoadingMoreEnabled&&this._onLoadingMore("toBottom")},doLoadMore(e){this._onLoadingMore(e)},_checkScrolledToBottom(e,t=!1){-1===this.cacheScrollNodeHeight?this._getNodeClientRect(".zp-scroll-view").then(t=>{if(t){const i=t[0].height;this.cacheScrollNodeHeight=i,e-i<=this.finalLowerThreshold&&this._onLoadingMore("toBottom")}}):(e-this.cacheScrollNodeHeight<=this.finalLowerThreshold?this._onLoadingMore("toBottom"):e-this.cacheScrollNodeHeight<=500&&!t&&he.delay(()=>{this._getNodeClientRect(".zp-scroll-view",!0,!0).then(e=>{if(e){this.oldScrollTop=e[0].scrollTop;const t=e[0].scrollHeight-this.oldScrollTop;this._checkScrolledToBottom(t,!0)}})},150,"checkScrolledToBottomDelay"),this.oldScrollTop<=150&&0!==this.oldScrollTop&&he.delay(()=>{0!==this.oldScrollTop&&this._getNodeClientRect(".zp-scroll-view",!0,!0).then(e=>{e&&0===e[0].scrollTop&&0!==this.oldScrollTop&&this._onScrollToUpper()})},150,"checkScrolledToTopDelay"))},_onLoadingMore(e="click"){this.isIos&&"toBottom"===e&&!this.scrollToBottomBounceEnabled&&this.scrollEnable&&(this.scrollEnable=!1,this.$nextTick(()=>{this.scrollEnable=!0})),this.$emit("scrolltolower",e),this.refresherOnly||!this.loadingMoreEnabled||this.loadingStatus!==ne.More.Default&&this.loadingStatus!==ne.More.Fail||this.loading||this.showEmpty||this._doLoadingMore()},_doLoadingMore(){this.pageNo>=this.defaultPageNo&&this.loadingStatus!==ne.More.NoMore&&(this.pageNo++,this._startLoading(!1),this.isLocalPaging?this._localPagingQueryList(this.pageNo,this.defaultPageSize,this.localPagingLoadingTime,e=>{this.completeByTotal(e,this.totalLocalPagingList.length),this.queryFrom=ne.QueryFrom.LoadingMore}):(this._emitQuery(this.pageNo,this.defaultPageSize,ne.QueryFrom.LoadingMore),this._callMyParentQuery()),this.loadingType=ne.LoadingType.LoadingMore)},_preCheckShowNoMoreInside(e,t,i){this.loadingStatus===ne.More.NoMore&&this.hideNoMoreByLimit>0&&e.length?this.showLoadingMore=e.length>this.hideNoMoreByLimit:this.loadingStatus===ne.More.NoMore&&this.hideNoMoreInside&&e.length||this.insideMore&&!1!==this.insideOfPaging&&e.length?(this.$nextTick(()=>{this._checkShowNoMoreInside(e,t,i)}),this.insideMore&&!1!==this.insideOfPaging&&e.length&&(this.showLoadingMore=e.length)):this.showLoadingMore=e.length},_checkShowNoMoreInside(e,t,i){return a(this,null,function*(){try{const e=t||(yield this._getNodeClientRect(".zp-scroll-view"));if(this.usePageScroll){if(e){const t=e[0].top+e[0].height;this.insideOfPaging=t<this.windowHeight,this.hideNoMoreInside&&(this.showLoadingMore=!this.insideOfPaging),this._updateInsideOfPaging()}}else{const t=i||(yield this._getNodeClientRect(".zp-paging-container-content")),o=t?t[0].height:0,s=e?e[0].height:0;this.insideOfPaging=o<s,this.hideNoMoreInside&&(this.showLoadingMore=!this.insideOfPaging),this._updateInsideOfPaging()}}catch(o){this.insideOfPaging=!e.length,this.hideNoMoreInside&&(this.showLoadingMore=!this.insideOfPaging),this._updateInsideOfPaging()}})},_showLoadingMore(e){if(!this.showLoadingMoreWhenReload&&(this.loadingStatus===ne.More.Default&&!this.nShowBottom||!this.realTotalData.length))return!1;if((!this.showLoadingMoreWhenReload||this.isUserPullDown||this.loadingStatus!==ne.More.Loading)&&!this.showLoadingMore||!this.loadingMoreEnabled&&(!this.showLoadingMoreWhenReload||this.isUserPullDown||this.loadingStatus!==ne.More.Loading)||this.refresherOnly)return!1;if(this.useChatRecordMode&&"Loading"!==e)return!1;if(!this.zSlots)return!1;if("Custom"===e)return this.showDefaultLoadingMoreText&&!(this.loadingStatus===ne.More.NoMore&&!this.showLoadingMoreNoMoreView);return this.loadingStatus===ne.More[e]&&this.zSlots[`loadingMore${e}`]&&("NoMore"!==e||this.showLoadingMoreNoMoreView)}}},De={props:{autoHideLoadingAfterFirstLoaded:{type:Boolean,default:he.gc("autoHideLoadingAfterFirstLoaded",!0)},loadingFullFixed:{type:Boolean,default:he.gc("loadingFullFixed",!1)},autoShowSystemLoading:{type:Boolean,default:he.gc("autoShowSystemLoading",!1)},systemLoadingMask:{type:Boolean,default:he.gc("systemLoadingMask",!0)},systemLoadingText:{type:[String,Object],default:he.gc("systemLoadingText",null)}},data:()=>({loading:!1,loadingForNow:!1}),watch:{loadingStatus(e){this.$emit("loadingStatusChange",e),this.$nextTick(()=>{this.loadingStatusAfterRender=e}),!this.useChatRecordMode||!this.isFirstPage||e!==ne.More.NoMore&&e!==ne.More.Fail?this.isFirstPageAndNoMore=!1:this.isFirstPageAndNoMore=!0},loading(e){e&&(this.loadingForNow=e)}},computed:{showLoading(){return!(this.firstPageLoaded||!this.loading||!this.loadingForNow)&&(this.finalShowSystemLoading&&z({title:this.finalSystemLoadingText,mask:this.systemLoadingMask}),this.autoHideLoadingAfterFirstLoaded?!!this.fromEmptyViewReload||!this.pagingLoaded:this.loadingType===ne.LoadingType.Refresher)},finalShowSystemLoading(){return this.autoShowSystemLoading&&this.loadingType===ne.LoadingType.Refresher}},methods:{_startLoading(e=!1){(this.showLoadingMoreWhenReload&&!this.isUserPullDown||!e)&&(this.loadingStatus=ne.More.Loading),this.loading=!0},_endSystemLoadingAndRefresh(){this.finalShowSystemLoading&&D(),!this.useCustomRefresher&&I()}}},Ie={props:{useChatRecordMode:{type:Boolean,default:he.gc("useChatRecordMode",!1)},chatRecordMoreOffset:{type:[Number,String],default:he.gc("chatRecordMoreOffset","0rpx")},autoHideKeyboardWhenChat:{type:Boolean,default:he.gc("autoHideKeyboardWhenChat",!0)},autoAdjustPositionWhenChat:{type:Boolean,default:he.gc("autoAdjustPositionWhenChat",!0)},chatAdjustPositionOffset:{type:[Number,String],default:he.gc("chatAdjustPositionOffset","0rpx")},autoToBottomWhenChat:{type:Boolean,default:he.gc("autoToBottomWhenChat",!1)},showChatLoadingWhenReload:{type:Boolean,default:he.gc("showChatLoadingWhenReload",!1)},chatLoadingMoreDefaultAsLoading:{type:Boolean,default:he.gc("chatLoadingMoreDefaultAsLoading",!0)}},data:()=>({keyboardHeight:0,isKeyboardHeightChanged:!1}),computed:{finalChatRecordMoreOffset(){return he.convertToPx(this.chatRecordMoreOffset)},finalChatAdjustPositionOffset(){return he.convertToPx(this.chatAdjustPositionOffset)},chatRecordRotateStyle(){let e;return e=this.useChatRecordMode?{transform:"scaleY(-1)"}:{},this.$emit("update:cellStyle",e),this.$emit("cellStyleChange",e),this.$nextTick(()=>{this.isFirstPage&&this.isChatRecordModeAndNotInversion&&this.$nextTick(()=>{this._scrollToBottom(!1),he.delay(()=>{this._scrollToBottom(!1),he.delay(()=>{this._scrollToBottom(!1)},50)},50)})}),e},isChatRecordModeHasTransform(){return this.useChatRecordMode&&this.chatRecordRotateStyle&&this.chatRecordRotateStyle.transform},isChatRecordModeAndNotInversion(){return this.isChatRecordModeHasTransform&&"scaleY(1)"===this.chatRecordRotateStyle.transform},isChatRecordModeAndInversion(){return this.isChatRecordModeHasTransform&&"scaleY(-1)"===this.chatRecordRotateStyle.transform},chatRecordModeSafeAreaBottom(){return this.safeAreaInsetBottom&&!this.keyboardHeight?this.safeAreaBottom:0}},mounted(){},methods:{addChatRecordData(e,t=!0,i=!0){this.useChatRecordMode&&(this.isTotalChangeFromAddData=!0,this.addDataFromTop(e,t,i))},doChatRecordLoadMore(){this.useChatRecordMode&&this._onLoadingMore("click")},_handleKeyboardHeightChange(e){this.$emit("keyboardHeightChange",e),this.autoAdjustPositionWhenChat&&(this.isKeyboardHeightChanged=!0,this.keyboardHeight=e.height>0?e.height+this.finalChatAdjustPositionOffset:e.height),this.autoToBottomWhenChat&&this.keyboardHeight>0&&he.delay(()=>{this.scrollToBottom(!1),he.delay(()=>{this.scrollToBottom(!1)})})}}},ze={props:{usePageScroll:{type:Boolean,default:he.gc("usePageScroll",!1)},scrollable:{type:Boolean,default:he.gc("scrollable",!0)},showScrollbar:{type:Boolean,default:he.gc("showScrollbar",!0)},scrollX:{type:Boolean,default:he.gc("scrollX",!1)},scrollToTopBounceEnabled:{type:Boolean,default:he.gc("scrollToTopBounceEnabled",!1)},scrollToBottomBounceEnabled:{type:Boolean,default:he.gc("scrollToBottomBounceEnabled",!0)},scrollWithAnimation:{type:Boolean,default:he.gc("scrollWithAnimation",!1)},scrollIntoView:{type:String,default:he.gc("scrollIntoView","")}},data:()=>({scrollTop:0,oldScrollTop:0,scrollViewStyle:{},scrollViewContainerStyle:{},scrollViewInStyle:{},pageScrollTop:-1,scrollEnable:!0,privateScrollWithAnimation:-1,cacheScrollNodeHeight:-1,superContentHeight:0}),watch:{oldScrollTop(e){!this.usePageScroll&&this._scrollTopChange(e,!1)},pageScrollTop(e){this.usePageScroll&&this._scrollTopChange(e,!0)},usePageScroll:{handler(e){this.loaded&&this.autoHeight&&this._setAutoHeight(!e),e&&this.$nextTick(()=>{const e=this.$refs["zp-scroll-view"].$refs.main;e&&(e.style={})})},immediate:!0},finalScrollTop(e){this.renderPropScrollTop=e<6?0:10}},computed:{finalScrollWithAnimation(){return-1!==this.privateScrollWithAnimation?1===this.privateScrollWithAnimation:this.scrollWithAnimation},finalScrollViewStyle(){return 1!=this.superContentZIndex&&(this.scrollViewStyle["z-index"]=this.superContentZIndex,this.scrollViewStyle.position="relative"),this.scrollViewStyle},finalScrollTop(){return this.usePageScroll?this.pageScrollTop:this.oldScrollTop},finalIsOldWebView(){return this.isOldWebView&&!this.usePageScroll},finalScrollable(){return this.scrollable&&!this.usePageScroll&&this.scrollEnable&&(!!this.refresherCompleteScrollable||this.refresherStatus!==ne.Refresher.Complete)&&(!!this.refresherRefreshingScrollable||this.refresherStatus!==ne.Refresher.Loading)}},methods:{scrollToTop(e,t=!0){this.useChatRecordMode&&t&&!this.isChatRecordModeAndNotInversion?this.scrollToBottom(e,!1):this.$nextTick(()=>{this._scrollToTop(e,!1)})},scrollToBottom(e,t=!0){this.useChatRecordMode&&t&&!this.isChatRecordModeAndNotInversion?this.scrollToTop(e,!1):this.$nextTick(()=>{this._scrollToBottom(e)})},scrollIntoViewById(e,t,i){this._scrollIntoView(e,t,i)},scrollIntoViewByNodeTop(e,t,i){this.scrollTop=this.oldScrollTop,this.$nextTick(()=>{this._scrollIntoViewByNodeTop(e,t,i)})},scrollToY(e,t,i){this.scrollTop=this.oldScrollTop,this.$nextTick(()=>{this._scrollToY(e,t,i)})},scrollIntoViewByIndex(e,t,i){e>=this.realTotalData.length?he.consoleErr("当前滚动的index超出已渲染列表长度，请先通过refreshToPage加载到对应index页并等待渲染成功后再调用此方法！"):this.$nextTick(()=>{if(this.finalUseVirtualList){const o=this.cellHeightMode===ne.CellHeightMode.Fixed;he.delay(()=>{if(this.finalUseVirtualList){const s=o?this.virtualCellHeight*e:this.virtualHeightCacheList[e].lastTotalHeight;this.scrollToY(s,t,i)}},o?0:100)}})},scrollIntoViewByView(e,t,i){this._scrollIntoView(e,t,i)},updatePageScrollTop(e){this.pageScrollTop=e},updatePageScrollTopHeight(){this._updatePageScrollTopOrBottomHeight("top")},updatePageScrollBottomHeight(){this._updatePageScrollTopOrBottomHeight("bottom")},updateLeftAndRightWidth(){this.finalIsOldWebView&&this.$nextTick(()=>this._updateLeftAndRightWidth(this.scrollViewContainerStyle,"zp-page"))},updateScrollViewScrollTop(e,t=!0){this._updatePrivateScrollWithAnimation(t),this.scrollTop=this.oldScrollTop,this.$nextTick(()=>{this.scrollTop=e,this.oldScrollTop=this.scrollTop})},_onScrollToUpper(){this.$emit("scrolltoupper"),this.$emit("scrollTopChange",0),this.$nextTick(()=>{this.oldScrollTop=0})},_onScrollToLower(e){(!e.detail||!e.detail.direction||"bottom"===e.detail.direction)&&this.toBottomLoadingMoreEnabled&&this._onLoadingMore(this.useChatRecordMode?"click":"toBottom")},_scrollToTop(e=!0,t=!0){this.usePageScroll?this.$nextTick(()=>{k({scrollTop:0,duration:e?100:0})}):(this._updatePrivateScrollWithAnimation(e),this.scrollTop=this.oldScrollTop,this.$nextTick(()=>{this.scrollTop=0,this.oldScrollTop=this.scrollTop}))},_scrollToBottom(e=!0){return a(this,null,function*(){if(this.usePageScroll)this.$nextTick(()=>{k({scrollTop:Number.MAX_VALUE,duration:e?100:0})});else try{this._updatePrivateScrollWithAnimation(e);const t=yield this._getNodeClientRect(".zp-paging-container"),i=yield this._getNodeClientRect(".zp-scroll-view"),o=t?t[0].height:0,s=i?i[0].height:0;o>s&&(this.scrollTop=this.oldScrollTop,this.$nextTick(()=>{this.scrollTop=o-s+this.virtualPlaceholderTopHeight,this.oldScrollTop=this.scrollTop}))}catch(t){}})},_scrollIntoView(e,t=0,i=!1,o){try{this.scrollTop=this.oldScrollTop,this.$nextTick(()=>{this._getNodeClientRect("#"+e.replace("#",""),this.$parent).then(e=>{if(e){let s=e[0].top;this._scrollIntoViewByNodeTop(s,t,i),o&&o()}})})}catch(s){}},_scrollIntoViewByNodeTop(e,t=0,i=!1){this.isChatRecordModeAndInversion?this._getNodeClientRect(".zp-scroll-view").then(o=>{o&&this._scrollToY(o[0].height-e,t,i,!0)}):this._scrollToY(e,t,i,!0)},_scrollToY(e,t=0,i=!1,o=!1){this._updatePrivateScrollWithAnimation(i),he.delay(()=>{if(this.usePageScroll){o&&-1!==this.pageScrollTop&&(e+=this.pageScrollTop);k({scrollTop:e-t,duration:i?100:0})}else o&&(e+=this.oldScrollTop),this.scrollTop=e-t},10)},_scroll(e){this.$emit("scroll",e);const t=e.detail.scrollTop;this.finalUseVirtualList&&this._updateVirtualScroll(t,this.oldScrollTop-t),this.oldScrollTop=t;const i=e.detail.scrollHeight-this.oldScrollTop;!this.isIos&&this._checkScrolledToBottom(i)},_updatePrivateScrollWithAnimation(e){this.privateScrollWithAnimation=e?1:0,he.delay(()=>this.$nextTick(()=>{this.privateScrollWithAnimation=-1}),100,"updateScrollWithAnimationDelay")},_doCheckScrollViewShouldFullHeight(e){this.autoFullHeight&&this.usePageScroll&&this.isTotalChangeFromAddData?this.$nextTick(()=>{this._checkScrollViewShouldFullHeight((t,i)=>{this._preCheckShowNoMoreInside(e,t,i)})}):this._preCheckShowNoMoreInside(e)},_checkScrollViewShouldFullHeight(e){return a(this,null,function*(){try{const t=yield this._getNodeClientRect(".zp-scroll-view"),i=yield this._getNodeClientRect(".zp-paging-container-content");if(!t||!i)return;const o=i[0].height,s=t[0].top;this.isAddedData&&o+s<=this.windowHeight?(this._setAutoHeight(!0,t),e(t,i)):(this._setAutoHeight(!1),e(null,null))}catch(t){e(null,null)}})},_updateCachedSuperContentHeight(){return a(this,null,function*(){const e=yield this._getNodeClientRect(".z-paging-content");e&&(this.superContentHeight=e[0].height)})},_scrollTopChange(e,t){this.$emit("scrollTopChange",e),this.$emit("update:scrollTop",e),this._checkShouldShowBackToTop(e);const i=e>5?6:0;t&&this.wxsPageScrollTop!==i?this.wxsPageScrollTop=i:t||this.wxsScrollTop===i||(this.wxsScrollTop=i,i>6&&(this.scrollEnable=!0))},_updatePageScrollTopOrBottomHeight(e){if(!this.usePageScroll)return;this._doCheckScrollViewShouldFullHeight(this.realTotalData);const t=`.zp-page-${e}`,i=`margin${e.slice(0,1).toUpperCase()+e.slice(1)}`;let o=this.safeAreaInsetBottom;this.$nextTick(()=>{he.delay(()=>{this._getNodeClientRect(t).then(t=>{if(t){let s=t[0].height;"bottom"===e?o&&(s+=this.safeAreaBottom):this.cacheTopHeight=s,this.$set(this.scrollViewStyle,i,`${s}px`)}else o&&this.$set(this.scrollViewStyle,i,`${this.safeAreaBottom}px`)})},0)})}}},ke={props:{autoShowBackToTop:{type:Boolean,default:he.gc("autoShowBackToTop",!1)},backToTopThreshold:{type:[Number,String],default:he.gc("backToTopThreshold","400rpx")},backToTopImg:{type:String,default:he.gc("backToTopImg","")},backToTopWithAnimate:{type:Boolean,default:he.gc("backToTopWithAnimate",!0)},backToTopBottom:{type:[Number,String],default:he.gc("backToTopBottom","160rpx")},backToTopStyle:{type:Object,default:he.gc("backToTopStyle",{})},enableBackToTop:{type:Boolean,default:he.gc("enableBackToTop",!0)}},data:()=>({backToTopClass:"zp-back-to-top zp-back-to-top-hide",lastBackToTopShowTime:0,showBackToTopClass:!1}),computed:{backToTopThresholdUnitConverted(){return he.addUnit(this.backToTopThreshold,this.unit)},backToTopBottomUnitConverted(){return he.addUnit(this.backToTopBottom,this.unit)},finalEnableBackToTop(){return!this.usePageScroll&&this.enableBackToTop},finalBackToTopThreshold(){return he.convertToPx(this.backToTopThresholdUnitConverted)},finalBackToTopStyle(){const e=this.backToTopStyle;return e.bottom||(e.bottom=this.windowBottom+he.convertToPx(this.backToTopBottomUnitConverted)+"px"),e.position||(e.position=this.usePageScroll?"fixed":"absolute"),e},finalBackToTopClass(){return`${this.backToTopClass} zp-back-to-top-${this.unit}`}},methods:{_backToTopClick(){let e=!1;this.$emit("backToTopClick",t=>{(void 0===t||!0===t)&&this._handleToTop(),e=!0}),this.$nextTick(()=>{!e&&this._handleToTop()})},_handleToTop(){!this.backToTopWithAnimate&&this._checkShouldShowBackToTop(0),this.useChatRecordMode?this.scrollToBottom(this.backToTopWithAnimate):this.scrollToTop(this.backToTopWithAnimate)},_checkShouldShowBackToTop(e){this.autoShowBackToTop?e>this.finalBackToTopThreshold?this.showBackToTopClass||(this.showBackToTopClass=!0,this.lastBackToTopShowTime=(new Date).getTime(),he.delay(()=>{this.backToTopClass="zp-back-to-top zp-back-to-top-show"},300)):this.showBackToTopClass&&(this.backToTopClass="zp-back-to-top zp-back-to-top-hide",he.delay(()=>{this.showBackToTopClass=!1},(new Date).getTime()-this.lastBackToTopShowTime<500?0:300)):this.showBackToTopClass=!1}}},He={props:{useVirtualList:{type:Boolean,default:he.gc("useVirtualList",!1)},useCompatibilityMode:{type:Boolean,default:he.gc("useCompatibilityMode",!1)},extraData:{type:Object,default:he.gc("extraData",{})},useInnerList:{type:Boolean,default:he.gc("useInnerList",!1)},forceCloseInnerList:{type:Boolean,default:he.gc("forceCloseInnerList",!1)},cellKeyName:{type:String,default:he.gc("cellKeyName","")},innerListStyle:{type:Object,default:he.gc("innerListStyle",{})},innerCellStyle:{type:Object,default:he.gc("innerCellStyle",{})},preloadPage:{type:[Number,String],default:he.gc("preloadPage",12),validator:e=>(e<=0&&he.consoleErr("preload-page必须大于0！"),e>0)},cellHeightMode:{type:String,default:he.gc("cellHeightMode",ne.CellHeightMode.Fixed)},fixedCellHeight:{type:[Number,String],default:he.gc("fixedCellHeight",0)},virtualListCol:{type:[Number,String],default:he.gc("virtualListCol",1)},virtualScrollFps:{type:[Number,String],default:he.gc("virtualScrollFps",80)}},data:()=>({virtualListKey:he.getInstanceId(),virtualPageHeight:0,virtualCellHeight:0,virtualScrollTimeStamp:0,virtualList:[],virtualPlaceholderTopHeight:0,virtualPlaceholderBottomHeight:0,virtualTopRangeIndex:0,virtualBottomRangeIndex:0,lastVirtualTopRangeIndex:0,lastVirtualBottomRangeIndex:0,virtualItemInsertedCount:0,virtualHeightCacheList:[],getCellHeightRetryCount:{fixed:0,dynamic:0},pagingOrgTop:-1,updateVirtualListFromDataChange:!1}),watch:{realTotalData(){this.updateVirtualListRender()},virtualList(e){this.$emit("update:virtualList",e),this.$emit("virtualListChange",e)},virtualPlaceholderTopHeight(e){this.$emit("virtualTopHeightChange",e)}},computed:{virtualCellIndexKey:()=>q,finalUseVirtualList(){return this.useVirtualList&&this.usePageScroll&&he.consoleErr("使用页面滚动时，开启虚拟列表无效！"),this.useVirtualList&&!this.usePageScroll},finalUseInnerList(){return this.useInnerList||this.finalUseVirtualList&&!this.forceCloseInnerList},finalCellKeyName(){return this.cellKeyName},finalVirtualPageHeight(){return this.virtualPageHeight>0?this.virtualPageHeight:this.windowHeight},finalFixedCellHeight(){return he.convertToPx(this.fixedCellHeight)},virtualRangePageHeight(){return this.finalVirtualPageHeight*this.preloadPage},virtualScrollDisTimeStamp(){return 1e3/this.virtualScrollFps}},methods:{doInsertVirtualListItem(e,t){if(this.cellHeightMode!==ne.CellHeightMode.Dynamic)return;this.virtualItemInsertedCount++,e&&"[object Object]"===Object.prototype.toString.call(e)||(e={item:e});const i=this.virtualCellIndexKey;e[i]=`custom-${this.virtualItemInsertedCount}`,e[X]=`${this.virtualListKey}-${e[i]}`,this.$nextTick(()=>a(this,null,function*(){let o=0;for(;o<=10;){yield he.wait(K);const s=yield this._getNodeClientRect(`#zp-id-${e[i]}`,this.finalUseInnerList);if(!s){o++;continue}const r=s?s[0].height:0,a=this.virtualHeightCacheList[t-1],l=a?a.totalHeight:0;this.virtualHeightCacheList.splice(t,0,{height:r,lastTotalHeight:l,totalHeight:l+r});for(let e=t+1;e<this.virtualHeightCacheList.length;e++){const t=this.virtualHeightCacheList[e];t.lastTotalHeight+=r,t.totalHeight+=r}this._updateVirtualScroll(this.oldScrollTop);break}}))},didUpdateVirtualListCell(e){if(this.cellHeightMode!==ne.CellHeightMode.Dynamic)return;const t=this.virtualHeightCacheList[e];this.$nextTick(()=>{this._getNodeClientRect(`#zp-id-${e}`,this.finalUseInnerList).then(i=>{const o=i?i[0].height:0,s=o-t.height;t.height=o,t.totalHeight=t.lastTotalHeight+o;for(let t=e+1;t<this.virtualHeightCacheList.length;t++){const e=this.virtualHeightCacheList[t];e.totalHeight+=s,e.lastTotalHeight+=s}})})},didDeleteVirtualListCell(e){if(this.cellHeightMode!==ne.CellHeightMode.Dynamic)return;const t=this.virtualHeightCacheList[e];for(let i=e+1;i<this.virtualHeightCacheList.length;i++){const e=this.virtualHeightCacheList[i];e.totalHeight-=t.height,e.lastTotalHeight-=t.height}this.virtualHeightCacheList.splice(e,1)},updateVirtualListRender(){this.finalUseVirtualList&&(this.updateVirtualListFromDataChange=!0,this.$nextTick(()=>{this.getCellHeightRetryCount.fixed=0,this.realTotalData.length?this.cellHeightMode===ne.CellHeightMode.Fixed&&this.isFirstPage&&this._updateFixedCellHeight():this._resetDynamicListState(!this.isUserPullDown),this._updateVirtualScroll(this.oldScrollTop)}))},_virtualListInit(){this.$nextTick(()=>{he.delay(()=>{this._getNodeClientRect(".zp-scroll-view").then(e=>{e&&(this.pagingOrgTop=e[0].top,this.virtualPageHeight=e[0].height)})})})},_updateFixedCellHeight(){this.finalFixedCellHeight?this.virtualCellHeight=this.finalFixedCellHeight:this.$nextTick(()=>{he.delay(()=>{this._getNodeClientRect("#zp-id-0",this.finalUseInnerList).then(e=>{if(e)this.virtualCellHeight=e[0].height,this._updateVirtualScroll(this.oldScrollTop);else{if(this.getCellHeightRetryCount.fixed>10)return;this.getCellHeightRetryCount.fixed++,this._updateFixedCellHeight()}})},K,"updateFixedCellHeightDelay")})},_updateDynamicCellHeight(e,t="bottom"){const i="top"===t,o=this.virtualHeightCacheList,s=i?[]:o;let r=0;this.$nextTick(()=>{he.delay(()=>a(this,null,function*(){for(let a=0;a<e.length;a++){const l=yield this._getNodeClientRect(`#zp-id-${e[a][this.virtualCellIndexKey]}`,this.finalUseInnerList),h=l?l[0].height:0;if(!l)return void(this.getCellHeightRetryCount.dynamic<=10&&(o.splice(o.length-a,a),this.getCellHeightRetryCount.dynamic++,this._updateDynamicCellHeight(e,t)));const n=s.length?s.slice(-1)[0]:null,d=n?n.totalHeight:0;s.push({height:h,lastTotalHeight:d,totalHeight:d+h}),i&&(r+=h)}if(i&&e.length){for(let e=0;e<o.length;e++){const t=o[e];t.lastTotalHeight+=r,t.totalHeight+=r}this.virtualHeightCacheList=s.concat(o)}this._updateVirtualScroll(this.oldScrollTop)}),K,"updateDynamicCellHeightDelay")})},_setCellIndex(e,t="bottom"){let i=0;const o=this.virtualCellIndexKey;if([ne.QueryFrom.Refresh,ne.QueryFrom.Reload].indexOf(this.queryFrom)>=0&&this._resetDynamicListState(),this.totalData.length){if("bottom"===t){i=this.realTotalData.length;const e=this.realTotalData.length?this.realTotalData.slice(-1)[0]:null;e&&void 0!==e[o]&&(i=e[o]+1)}else if("top"===t){const t=this.realTotalData.length?this.realTotalData[0]:null;t&&void 0!==t[o]&&(i=t[o]-e.length)}}else this._resetDynamicListState();for(let s=0;s<e.length;s++){let t=e[s];t&&"[object Object]"===Object.prototype.toString.call(t)||(t={item:t}),t[X]&&(t=he.deepCopy(t)),t[o]=i+s,t[X]=`${this.virtualListKey}-${t[o]}`,e[s]=t}this.getCellHeightRetryCount.dynamic=0,this.cellHeightMode===ne.CellHeightMode.Dynamic&&this._updateDynamicCellHeight(e,t)},_updateVirtualScroll(e,t=0){const i=he.getTime();if(0===e&&this._resetTopRange(),0!==e&&this.virtualScrollTimeStamp&&i-this.virtualScrollTimeStamp<=this.virtualScrollDisTimeStamp)return;this.virtualScrollTimeStamp=i;let o=0;const s=this.cellHeightMode;if(s===ne.CellHeightMode.Fixed)o=parseInt(e/this.virtualCellHeight)||0,this._updateFixedTopRangeIndex(o),this._updateFixedBottomRangeIndex(o);else if(s===ne.CellHeightMode.Dynamic){const i=t>0?"top":"bottom",o=this.virtualRangePageHeight,s=e-o,r=e+this.finalVirtualPageHeight+o;let a=0,l=0,h=!1;const n=this.virtualHeightCacheList,d=n?n.slice(-1)[0]:null;let c=this.virtualTopRangeIndex;if("bottom"===i)for(let e=c;e<n.length;e++){const t=n[e];if(t&&t.totalHeight>s){this.virtualTopRangeIndex=e,this.virtualPlaceholderTopHeight=t.lastTotalHeight;break}}else{let e=!1;for(let t=c;t>=0;t--){const i=n[t];if(i&&i.totalHeight<s){this.virtualTopRangeIndex=t,this.virtualPlaceholderTopHeight=i.lastTotalHeight,e=!0;break}}!e&&this._resetTopRange()}for(let e=this.virtualTopRangeIndex;e<n.length;e++){const t=n[e];if(t&&t.totalHeight>r){a=e,l=d.totalHeight-t.totalHeight,h=!0;break}}h&&0!==this.virtualBottomRangeIndex?(this.virtualBottomRangeIndex=a,this.virtualPlaceholderBottomHeight=l):(this.virtualBottomRangeIndex=this.realTotalData.length?this.realTotalData.length-1:this.pageSize,this.virtualPlaceholderBottomHeight=0),this._updateVirtualList()}},_updateFixedTopRangeIndex(e){let t=0===this.virtualCellHeight?0:e-(parseInt(this.finalVirtualPageHeight/this.virtualCellHeight)||1)*this.preloadPage;t*=this.virtualListCol,t=Math.max(0,t),this.virtualTopRangeIndex=t,this.virtualPlaceholderTopHeight=t/this.virtualListCol*this.virtualCellHeight},_updateFixedBottomRangeIndex(e){let t=0===this.virtualCellHeight?this.pageSize:e+(parseInt(this.finalVirtualPageHeight/this.virtualCellHeight)||1)*(this.preloadPage+1);t*=this.virtualListCol,t=Math.min(this.realTotalData.length,t),this.virtualBottomRangeIndex=t,this.virtualPlaceholderBottomHeight=(this.realTotalData.length-t)*this.virtualCellHeight/this.virtualListCol,this._updateVirtualList()},_updateVirtualList(){(this.updateVirtualListFromDataChange||this.lastVirtualTopRangeIndex!==this.virtualTopRangeIndex||this.lastVirtualBottomRangeIndex!==this.virtualBottomRangeIndex)&&(this.updateVirtualListFromDataChange=!1,this.lastVirtualTopRangeIndex=this.virtualTopRangeIndex,this.lastVirtualBottomRangeIndex=this.virtualBottomRangeIndex,this.virtualList=this.realTotalData.slice(this.virtualTopRangeIndex,this.virtualBottomRangeIndex+1))},_resetDynamicListState(e=!1){this.virtualHeightCacheList=[],e&&(this.virtualList=[]),this.virtualTopRangeIndex=0,this.virtualPlaceholderTopHeight=0},_resetTopRange(){this.virtualTopRangeIndex=0,this.virtualPlaceholderTopHeight=0,this._updateVirtualList()},_checkVirtualListScroll(){this.finalUseVirtualList&&this.$nextTick(()=>{this._getNodeClientRect(".zp-paging-touch-view").then(e=>{const t=e?e[0].top:0;(!e||t===this.pagingOrgTop&&0!==this.virtualPlaceholderTopHeight)&&this._updateVirtualScroll(0)})})},_innerCellClick(e,t){this.$emit("innerCellClick",e,t)}}},Be=c(),Fe={name:"z-paging",components:{zPagingRefresh:de,zPagingLoadMore:ce,zPagingEmptyView:W},mixins:[j,Re,be,Le,ve,_e,Pe,De,Ie,ze,ke,He],data:()=>({base64Arrow:U.base64Arrow,base64Flower:U.base64Flower,base64BackToTop:U.base64BackToTop,loadingType:ne.LoadingType.Refresher,requestTimeStamp:0,wxsPropType:"",renderPropScrollTop:-1,checkScrolledToBottomTimeOut:null,cacheTopHeight:-1,statusBarHeight:Be.statusBarHeight,insideOfPaging:-1,isLoadFailed:!1,isIos:"ios"===Be.platform,disabledBounce:!1,fromCompleteEmit:!1,disabledCompleteEmit:!1,pageLaunched:!1,active:!1,wxsIsScrollTopInTopRange:!0,wxsScrollTop:0,wxsPageScrollTop:0,wxsOnPullingDown:!1}),props:{delay:{type:[Number,String],default:he.gc("delay",0)},minDelay:{type:[Number,String],default:he.gc("minDelay",0)},pagingStyle:{type:Object,default:he.gc("pagingStyle",{})},height:{type:String,default:he.gc("height","")},width:{type:String,default:he.gc("width","")},maxWidth:{type:String,default:he.gc("maxWidth","")},bgColor:{type:String,default:he.gc("bgColor","")},pagingContentStyle:{type:Object,default:he.gc("pagingContentStyle",{})},autoHeight:{type:Boolean,default:he.gc("autoHeight",!1)},autoHeightAddition:{type:[Number,String],default:he.gc("autoHeightAddition","0px")},defaultThemeStyle:{type:String,default:he.gc("defaultThemeStyle","black")},fixed:{type:Boolean,default:he.gc("fixed",!0)},safeAreaInsetBottom:{type:Boolean,default:he.gc("safeAreaInsetBottom",!1)},useSafeAreaPlaceholder:{type:Boolean,default:he.gc("useSafeAreaPlaceholder",!1)},bottomBgColor:{type:String,default:he.gc("bottomBgColor","")},topZIndex:{type:Number,default:he.gc("topZIndex",99)},superContentZIndex:{type:Number,default:he.gc("superContentZIndex",1)},contentZIndex:{type:Number,default:he.gc("contentZIndex",1)},f2ZIndex:{type:Number,default:he.gc("f2ZIndex",100)},autoFullHeight:{type:Boolean,default:he.gc("autoFullHeight",!0)},watchTouchDirectionChange:{type:Boolean,default:he.gc("watchTouchDirectionChange",!1)},unit:{type:String,default:he.gc("unit","rpx")}},created(){this.createdReload&&!this.refresherOnly&&this.auto&&(this._startLoading(),this.$nextTick(this._preReload))},mounted(){this.active=!0,this.wxsPropType=he.getTime().toString(),this.renderJsIgnore,this.createdReload||this.refresherOnly||!this.auto||he.delay(()=>this.$nextTick(this._preReload),0),this.finalUseCache&&this._setListByLocalCache();let e=0;e=K,this.$nextTick(()=>{this.systemInfo=c(),!this.usePageScroll&&this.autoHeight&&this._setAutoHeight(),this.loaded=!0,he.delay(()=>{this.updateFixedLayout(),this._updateCachedSuperContentHeight()})}),this.updatePageScrollTopHeight(),this.updatePageScrollBottomHeight(),this.updateLeftAndRightWidth(),this.finalRefresherEnabled&&this.useCustomRefresher&&this.$nextTick(()=>{this.isTouchmoving=!0}),this._onEmit(),this.finalUseVirtualList&&this._virtualListInit(),this.$nextTick(()=>{setTimeout(()=>{this._getCssSafeAreaInsetBottom(()=>this.safeAreaInsetBottom&&this.updatePageScrollBottomHeight())},e)})},destroyed(){this._handleUnmounted()},unmounted(){this._handleUnmounted()},watch:{defaultThemeStyle:{handler(e){e.length&&(this.finalRefresherDefaultStyle=e)},immediate:!0},autoHeight(e){this.loaded&&!this.usePageScroll&&this._setAutoHeight(e)},autoHeightAddition(e){this.loaded&&!this.usePageScroll&&this.autoHeight&&this._setAutoHeight(e)}},computed:{finalPagingStyle(){const e=r({},this.pagingStyle);if(!this.systemInfo)return e;const{windowTop:t,windowBottom:i}=this;return!this.usePageScroll&&this.fixed&&(t&&!e.top&&(e.top=t+"px"),i&&!e.bottom&&(e.bottom=i+"px")),this.bgColor.length&&!e.background&&(e.background=this.bgColor),this.height.length&&!e.height&&(e.height=this.height),this.width.length&&!e.width&&(e.width=this.width),this.maxWidth.length&&!e["max-width"]&&(e["max-width"]=this.maxWidth,e.margin="0 auto"),e},finalPagingContentStyle(){return 1!=this.contentZIndex&&(this.pagingContentStyle["z-index"]=this.contentZIndex,this.pagingContentStyle.position="relative"),this.pagingContentStyle},renderJsIgnore(){return(this.usePageScroll&&this.useChatRecordMode||!this.refresherEnabled&&this.scrollable||!this.useCustomRefresher)&&this.$nextTick(()=>{this.renderPropScrollTop=10}),0},windowHeight(){return this.systemInfo&&this.systemInfo.windowHeight||0},windowBottom(){if(!this.systemInfo)return 0;let e=this.systemInfo.windowBottom||0;return!this.safeAreaInsetBottom||this.useSafeAreaPlaceholder||this.useChatRecordMode||(e+=this.safeAreaBottom),e},isIosAndH5(){return this.isIos}},methods:{getVersion:()=>`z-paging v${Y}`,setSpecialEffects(e){this.setListSpecialEffects(e)},setListSpecialEffects(e){this.nFixFreezing=e&&Object.keys(e).length,this.isIos&&(this.privateRefresherEnabled=0),!this.usePageScroll&&this.$refs["zp-n-list"].setSpecialEffects(e)},_doVibrateShort(){},_setAutoHeight(e=!0,t=null){return a(this,null,function*(){let i="min-height";i="min-height";try{if(e){let e=t||(yield this._getNodeClientRect(".zp-scroll-view")),o=yield this._getNodeClientRect(".zp-page-bottom");if(e){const t=e[0].top;let s=this.windowHeight-t;s-=o?o[0].height:0;const r=s+he.convertToPx(this.autoHeightAddition)-(this.insideMore?1:0)+"px !important";this.$set(this.scrollViewStyle,i,r),this.$set(this.scrollViewInStyle,i,r)}}else this.$delete(this.scrollViewStyle,i),this.$delete(this.scrollViewInStyle,i)}catch(o){}})},_handleUnmounted(){this.active=!1,this._offEmit()},_updateInsideOfPaging(){this.insideMore&&!0===this.insideOfPaging&&setTimeout(this.doLoadMore,200)},_cleanTimeout:e=>(e&&(clearTimeout(e),e=null),e),_onEmit(){B(Q,e=>{this.loading&&(e&&(this.customerEmptyViewErrorText=e),this.complete(!1).catch(()=>{}))}),B(Z,e=>{setTimeout(()=>{if(this.loading)if(this.disabledCompleteEmit)this.disabledCompleteEmit=!1;else{const t=e.type||"normal",i=e.list||e,o=e.rule;switch(this.fromCompleteEmit=!0,t){case"normal":this.complete(i);break;case"total":this.completeByTotal(i,o);break;case"nomore":this.completeByNoMore(i,o);break;case"key":this.completeByKey(i,o)}}},1)})},_offEmit(){H(Q),H(Z)}}};var Ve=0,Ne=-1,Ae=-1;function Ee(e,t){var i=Ze(t),o={},s={};if(t.callMethod("_handleListTouchstart"),!i||(o=i.getState(),s=i.getDataset(),!Ge(e,i))){var r=o.isTouchEnded;o.oldMoveDis=0;var a=Qe(e),l=Xe(s.loading);o.startY=a.touchY,Ae=o.startY,o.lastTouch=a,!l&&r&&(o.isTouchmoving=!1),o.isTouchEnded=!1,t.callMethod("_handleRefresherTouchstart",a)}}function $e(e,t){var i=Qe(e),o=Ze(t),s=o.getDataset(),r=s.refresherthreshold,a=s.refresherf2threshold,l=Xe(s.refresherf2enabled);Xe(s.isios);var h=o.getState(),n={},d=0,c=!1;if(Xe(s.watchtouchdirectionchange)){d=(n=Ke(e,o)).currentDis;var u=(c=n.isDown)?"top":"bottom";c==h.oldTouchDirection&&c!=h.oldEmitedTouchDirection&&(t.callMethod("_handleTouchDirectionChange",{direction:u}),h.oldEmitedTouchDirection=c),h.oldTouchDirection=c}if(Ge(e,o))return qe(h,t,!1),!0;if(!function(e,t,i,o){var s=o.refreshermaxangle,r=Xe(o.refresheraecc),a=i.lastTouch,l=i.reachMaxAngle,h=i.oldMoveDis;if(!a)return!0;if(s>=0&&s<=90&&a){if((!h||h<1)&&!r&&null!=l&&!l)return!1;var n=Math.abs(t.touchX-a.touchX),d=Math.abs(t.touchY-a.touchY),c=Math.sqrt(Math.pow(n,2)+Math.pow(d,2));if((n||d)&&n>1)if(Math.asin(d/c)/Math.PI*180<s){var u=i.hitReachMaxAngleCount||0;return i.hitReachMaxAngleCount=++u,i.hitReachMaxAngleCount>2&&(i.lastTouch=t,i.reachMaxAngle=!1),!1}}return i.lastTouch=t,!0}(0,i,h,s))return qe(h,t,!1),!0;if(d=(n=Ke(e,o)).currentDis,c=n.isDown,d<0)return je(0,o,h,!1),qe(h,t,!1),!0;if(c&&!h.disabledBounce)return t.callMethod("_handleScrollViewBounce",{bounce:!1}),h.disabledBounce=!0,qe(h,t,c),!c;je(d,o,h,!1);var g=h.refresherStatus,f=Xe(s.oldistouchmoving),p=Xe(s.hastouchmove),m=h.isTouchmoving;return h.refresherStatus=d>=r?l&&d>a?"goF2":"releaseToRefresh":"default",m||(h.isTouchmoving=!0,m=!0),h.isTouchEnded&&(h.isTouchEnded=!1),p&&t.callMethod("_handleWxsPullingDown",{moveDis:d,diffDis:n.diffDis}),null!=g&&g==h.refresherStatus&&f==m||t.callMethod("_handleRefresherTouchmove",d,i),qe(h,t,c),!c}function Oe(e,t){Qe(e);var i=Ze(t);i.getDataset();var o=i.getState();if(o.disabledBounce&&(t.callMethod("_handleScrollViewBounce",{bounce:!0}),o.disabledBounce=!1),!Ge(e,i)&&(o.reachMaxAngle=!0,o.hitReachMaxAngleCount=0,o.fixedIsTopHitCount=0,o.isTouchmoving)){var s=o.refresherStatus,r=o.moveDis,a=i.getDataset().refresherthreshold,l=Ke(e,i).currentDis;if(l>=a&&"releaseToRefresh"===s||(o.isTouchmoving=!1),t.callMethod("_handleRefresherTouchend",l),o.isTouchEnded=!0,!(r<a)){var h=!1;l>=a&&(l=a,h=!0),je(l,i,o,h)}}}function Ue(){if(!navigator)return!1;if(-1!=Ne)return Ne;return Ne=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"].every(function(e){return navigator.userAgent.indexOf(e)<0})}var We=!1;function je(e,t,i,o){e=e||0,i.moveDis!=e&&(i.moveDis=e,Ye("translateY("+e+"px)",t,o,""))}function Ye(e,t,i,o){Xe(t.getDataset().refreshernotransform)||(e="translateY(0px)"==e?"none":e,t.requestAnimationFrame(function(){var s={transform:e};i&&(s.transition="transform .1s linear"),o.length&&(s.transition=o),t.setStyle(s)}))}function Ke(e,t){var i=t.getState(),o=parseFloat(t.getDataset().refresherthreshold),s=parseFloat(t.getDataset().refresheroutrate),r=parseFloat(t.getDataset().refresherpullrate),a=Qe(e),l=i.startY&&"NaN"!=i.startY?i.startY:Ae,h=a.touchY-l,n=i.oldMoveDis||0;i.oldMoveDis=h;var d=h-n;return d>0&&(d*=r,Ve>o&&(d*=1-s)),Ve+=d=d>100?d/100:d>20?d/2.2:d,{currentDis:Ve=Math.max(0,Ve),diffDis:d,isDown:d>0}}function Qe(e){var t=e;return e.touches&&e.touches.length?t=e.touches[0]:e.changedTouches&&e.changedTouches.length?t=e.changedTouches[0]:e.datail&&e.datail!={}&&(t=e.datail),{touchX:t.clientX,touchY:t.clientY}}function Ze(e){var t=e.getState().currentIns;return t||e.callMethod("_handlePropUpdate"),t}function Ge(e,t,i){var o=t.getDataset(),s=t.getState(),r=Xe(o.loading),a=Xe(o.usechatrecordmode),l=Xe(o.refresherenabled),h=Xe(o.usecustomrefresher),n=Xe(o.usepagescroll),d=parseFloat(o.pagescrolltop),c=parseFloat(o.scrolltop);return s.fixedIsTopHitCount,s.fixedIsTopHitCount=0,r||a||!l||!h||n&&h&&d>5&&!0||!n&&h&&c>5&&!0}function qe(e,t,i){(e.onPullingDown||!1)!=i&&t.callMethod("_handleWxsPullingDownStatusChange",i),e.onPullingDown=i}function Xe(e){return 1==(e=("string"==typeof e?JSON.parse(e):e)||!1)||"true"==e}const Je={touchstart:Ee,touchmove:$e,touchend:Oe,mousedown:function(e,t){Ue()&&(Ee(e,t),We=!0)},mousemove:function(e,t){Ue()&&We&&$e(e,t)},mouseup:function(e,t){Ue()&&(Oe(e,t),We=!1)},mouseleave:function(e,t){Ue()&&(We=!1)},propObserver:function(e,t,i,o){var s=i.getState()||{};if(s.currentIns=o,o.getDataset().loading,e&&-1!=e.indexOf("end"))Ye("translateY(0px)",o,!1,e.split("end")[0]),s.moveDis=0,s.oldMoveDis=0,Ve=0;else if(e&&-1!=e.indexOf("begin")){je(o.getDataset().refresherthreshold,o,s,!1)}}},et=e=>{e.$wxs||(e.$wxs=[]),e.$wxs.push("pagingWxs"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.pagingWxs=Je}})},tt={startY:0,isTouchFromZPaging:!1,isUsePageScroll:!1,isReachedTop:!0,isIosAndH5:!1,useChatRecordMode:!1},it={name:"z-paging",mixins:[{mounted(){window&&this._handleTouch()},methods:{renderPropIsIosAndH5Change(e){-1!==e&&(tt.isIosAndH5=e)},_handleTouch(){window.$zPagingRenderJsInited||(window.$zPagingRenderJsInited=!0,window.addEventListener("touchstart",this._handleTouchstart,{passive:!0}),window.addEventListener("touchmove",this._handleTouchmove,{passive:!1}))},_handleTouchstart(e){const t=he.getTouch(e);tt.startY=t.touchY;const i=he.getTouchFromZPaging(e.target);tt.isTouchFromZPaging=i.isFromZp,tt.isUsePageScroll=i.isPageScroll,tt.isReachedTop=i.isReachedTop,tt.useChatRecordMode=i.isUseChatRecordMode},_handleTouchmove(e){const t=he.getTouch(e).touchY-tt.startY;tt.isTouchFromZPaging&&(tt.isReachedTop&&(tt.useChatRecordMode?t<0:t>0)||!tt.useChatRecordMode&&tt.isIosAndH5&&!tt.isUsePageScroll&&t<0)&&e.cancelable&&!e.defaultPrevented&&e.preventDefault()},_removeAllEventListener(){window.removeEventListener("touchstart"),window.removeEventListener("touchmove")}}}]},ot=e=>{e.$renderjs||(e.$renderjs=[]),e.$renderjs.push("pagingRenderjs"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.pagingRenderjs=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),e.mixins.push(it)};et(Fe),ot(Fe);const st=d(Fe,[["render",function(e,t,i,o,s,r){const a=m,l=F("z-paging-refresh"),h=F("z-paging-load-more"),n=V(N("z-paging-empty-view"),W),d=$,c=y;return g(),u(a,{class:T({"z-paging-content":!0,"z-paging-content-full":!e.usePageScroll,"z-paging-content-fixed":!e.usePageScroll&&e.fixed,"z-paging-content-page":e.usePageScroll,"z-paging-reached-top":e.renderPropScrollTop<1,"z-paging-use-chat-record-mode":e.useChatRecordMode}),style:S([e.finalPagingStyle])},{default:f(()=>[-1===e.cssSafeAreaInsetBottom?(g(),u(a,{key:0,class:"zp-safe-area-inset-bottom"})):w("",!0),e.showF2&&e.showRefresherF2?(g(),u(a,{key:1,onTouchmove:t[0]||(t[0]=E(()=>{},["stop","prevent"])),class:"zp-f2-content",style:S([{transform:e.f2Transform,transition:"transform .2s linear",height:e.superContentHeight+"px","z-index":e.f2ZIndex}])},{default:f(()=>[A(e.$slots,"f2",{},void 0,!0)]),_:3},8,["style"])):w("",!0),!e.usePageScroll&&e.zSlots.top?A(e.$slots,"top",{key:2},void 0,!0):e.usePageScroll&&e.zSlots.top?(g(),u(a,{key:3,class:"zp-page-top",onTouchmove:t[1]||(t[1]=E(()=>{},["stop","prevent"])),style:S([{top:`${e.windowTop}px`,"z-index":e.topZIndex}])},{default:f(()=>[A(e.$slots,"top",{},void 0,!0)]),_:3},8,["style"])):w("",!0),p(a,{class:T({"zp-view-super":!0,"zp-scroll-view-super":!e.usePageScroll}),style:S([e.finalScrollViewStyle])},{default:f(()=>[e.zSlots.left?(g(),u(a,{key:0,class:T({"zp-page-left":!0,"zp-absoulte":e.finalIsOldWebView})},{default:f(()=>[A(e.$slots,"left",{},void 0,!0)]),_:3},8,["class"])):w("",!0),p(a,{class:T({"zp-scroll-view-container":!0,"zp-absoulte":e.finalIsOldWebView}),style:S([e.scrollViewContainerStyle])},{default:f(()=>[p(d,{ref:"zp-scroll-view",class:T({"zp-scroll-view":!0,"zp-scroll-view-absolute":!e.usePageScroll,"zp-scroll-view-hide-scrollbar":!e.showScrollbar}),style:S([e.chatRecordRotateStyle]),"scroll-top":e.scrollTop,"scroll-x":e.scrollX,"scroll-y":e.finalScrollable,"enable-back-to-top":e.finalEnableBackToTop,"show-scrollbar":e.showScrollbar,"scroll-with-animation":e.finalScrollWithAnimation,"scroll-into-view":e.scrollIntoView,"lower-threshold":e.finalLowerThreshold,"upper-threshold":5,"refresher-enabled":e.finalRefresherEnabled&&!e.useCustomRefresher,"refresher-threshold":e.finalRefresherThreshold,"refresher-default-style":e.finalRefresherDefaultStyle,"refresher-background":e.refresherBackground,"refresher-triggered":e.finalRefresherTriggered,onScroll:e._scroll,onScrolltolower:e._onScrollToLower,onScrolltoupper:e._onScrollToUpper,onRefresherrestore:e._onRestore,onRefresherrefresh:t[4]||(t[4]=t=>e._onRefresh(!0))},{default:f(()=>[p(a,{class:"zp-paging-touch-view",onTouchstart:e.pagingWxs.touchstart,onTouchmove:e.pagingWxs.touchmove,onTouchend:e.pagingWxs.touchend,onTouchcancel:e.pagingWxs.touchend,onMousedown:e.pagingWxs.mousedown,onMousemove:e.pagingWxs.mousemove,onMouseup:e.pagingWxs.mouseup,onMouseleave:e.pagingWxs.mouseleave},{default:f(()=>[e.finalRefresherFixedBacHeight>0?(g(),u(a,{key:0,class:"zp-fixed-bac-view",style:S([{background:e.refresherFixedBackground,height:`${e.finalRefresherFixedBacHeight}px`}])},null,8,["style"])):w("",!0),p(a,{class:"zp-paging-main",style:S([e.scrollViewInStyle,{transform:e.finalRefresherTransform,transition:e.refresherTransition}]),"change:prop":e.pagingWxs.propObserver,prop:e.wxsPropType,"data-refresherThreshold":e.finalRefresherThreshold,"data-refresherF2Enabled":e.refresherF2Enabled,"data-refresherF2Threshold":e.finalRefresherF2Threshold,"data-isIos":e.isIos,"data-loading":e.loading||e.isRefresherInComplete,"data-useChatRecordMode":e.useChatRecordMode,"data-refresherEnabled":e.refresherEnabled,"data-useCustomRefresher":e.useCustomRefresher,"data-pageScrollTop":e.wxsPageScrollTop,"data-scrollTop":e.wxsScrollTop,"data-refresherMaxAngle":e.refresherMaxAngle,"data-refresherNoTransform":e.refresherNoTransform,"data-refresherAecc":e.refresherAngleEnableChangeContinued,"data-usePageScroll":e.usePageScroll,"data-watchTouchDirectionChange":e.watchTouchDirectionChange,"data-oldIsTouchmoving":e.isTouchmoving,"data-refresherOutRate":e.finalRefresherOutRate,"data-refresherPullRate":e.finalRefresherPullRate,"data-hasTouchmove":e.hasTouchmove,"change:renderPropIsIosAndH5":e.pagingRenderjs.renderPropIsIosAndH5Change,renderPropIsIosAndH5:e.isIosAndH5},{default:f(()=>[e.showRefresher?(g(),u(a,{key:0,class:"zp-custom-refresher-view",style:S([{"margin-top":`-${e.finalRefresherThreshold+e.refresherThresholdUpdateTag}px`,background:e.refresherBackground,opacity:e.isTouchmoving?1:0}])},{default:f(()=>[p(a,{class:"zp-custom-refresher-container",style:S([{height:`${e.finalRefresherThreshold}px`,background:e.refresherBackground}])},{default:f(()=>[e.useRefresherStatusBarPlaceholder?(g(),u(a,{key:0,class:"zp-custom-refresher-status-bar-placeholder",style:S([{height:`${e.statusBarHeight}px`}])},null,8,["style"])):w("",!0),p(a,{class:"zp-custom-refresher-slot-view"},{default:f(()=>[e.zSlots.refresherComplete&&e.refresherStatus===e.R.Complete||e.zSlots.refresherF2&&e.refresherStatus===e.R.GoF2?w("",!0):A(e.$slots,"refresher",{key:0,refresherStatus:e.refresherStatus},void 0,!0)]),_:3}),e.zSlots.refresherComplete&&e.refresherStatus===e.R.Complete?A(e.$slots,"refresherComplete",{key:1},void 0,!0):e.zSlots.refresherF2&&e.refresherStatus===e.R.GoF2?A(e.$slots,"refresherF2",{key:2},void 0,!0):e.showCustomRefresher?w("",!0):(g(),u(l,{key:3,ref:"refresh",class:"zp-custom-refresher-refresh",style:S([{height:e.finalRefresherThreshold-e.finalRefresherThresholdPlaceholder+"px"}]),status:e.refresherStatus,defaultThemeStyle:e.finalRefresherThemeStyle,defaultText:e.finalRefresherDefaultText,pullingText:e.finalRefresherPullingText,refreshingText:e.finalRefresherRefreshingText,completeText:e.finalRefresherCompleteText,goF2Text:e.finalRefresherGoF2Text,defaultImg:e.refresherDefaultImg,pullingImg:e.refresherPullingImg,refreshingImg:e.refresherRefreshingImg,completeImg:e.refresherCompleteImg,refreshingAnimated:e.refresherRefreshingAnimated,showUpdateTime:e.showRefresherUpdateTime,updateTimeKey:e.refresherUpdateTimeKey,updateTimeTextMap:e.finalRefresherUpdateTimeTextMap,imgStyle:e.refresherImgStyle,titleStyle:e.refresherTitleStyle,updateTimeStyle:e.refresherUpdateTimeStyle,unit:e.unit},null,8,["style","status","defaultThemeStyle","defaultText","pullingText","refreshingText","completeText","goF2Text","defaultImg","pullingImg","refreshingImg","completeImg","refreshingAnimated","showUpdateTime","updateTimeKey","updateTimeTextMap","imgStyle","titleStyle","updateTimeStyle","unit"]))]),_:3},8,["style"])]),_:3},8,["style"])):w("",!0),p(a,{class:"zp-paging-container",style:S([{justifyContent:e.useChatRecordMode?"flex-end":"flex-start"}])},{default:f(()=>[e.showLoading&&e.zSlots.loading&&!e.loadingFullFixed?A(e.$slots,"loading",{key:0},void 0,!0):w("",!0),p(a,{class:"zp-paging-container-content",style:S([e.finalPagingContentStyle])},{default:f(()=>[e.useVirtualList?(g(),u(a,{key:0,class:"zp-virtual-placeholder",style:S([{height:e.virtualPlaceholderTopHeight+"px"}])},null,8,["style"])):w("",!0),A(e.$slots,"default",{},void 0,!0),e.finalUseInnerList?(g(),M(b,{key:1},[A(e.$slots,"header",{},void 0,!0),p(a,{class:"zp-list-container",style:S([e.innerListStyle])},{default:f(()=>[e.finalUseVirtualList?(g(!0),M(b,{key:0},O(e.virtualList,(t,i)=>(g(),u(a,{class:"zp-list-cell",style:S([e.innerCellStyle]),id:`zp-id-${t[e.virtualCellIndexKey]}`,key:t.zp_unique_index,onClick:o=>e._innerCellClick(t,e.virtualTopRangeIndex+i)},{default:f(()=>[e.useCompatibilityMode?(g(),u(a,{key:0},{default:f(()=>[C("使用兼容模式请在组件源码z-paging.vue第101行中注释这一行，并打开下面一行注释")]),_:1})):A(e.$slots,"cell",{key:1,item:t,index:e.virtualTopRangeIndex+i},void 0,!0)]),_:2},1032,["style","id","onClick"]))),128)):(g(!0),M(b,{key:1},O(e.realTotalData,(t,i)=>(g(),u(a,{class:"zp-list-cell",key:i,onClick:o=>e._innerCellClick(t,i)},{default:f(()=>[A(e.$slots,"cell",{item:t,index:i},void 0,!0)]),_:2},1032,["onClick"]))),128))]),_:3},8,["style"]),A(e.$slots,"footer",{},void 0,!0)],64)):w("",!0),e.useChatRecordMode&&e.realTotalData.length>=e.defaultPageSize&&(e.loadingStatus!==e.M.NoMore||e.zSlots.chatNoMore)&&(e.realTotalData.length||e.showChatLoadingWhenReload&&e.showLoading)&&!e.isFirstPageAndNoMore?(g(),u(a,{key:2,style:S([e.chatRecordRotateStyle])},{default:f(()=>[e.loadingStatus===e.M.NoMore&&e.zSlots.chatNoMore?A(e.$slots,"chatNoMore",{key:0},void 0,!0):(g(),M(b,{key:1},[e.zSlots.chatLoading?A(e.$slots,"chatLoading",{key:0,loadingMoreStatus:e.loadingStatus},void 0,!0):(g(),u(h,{key:1,onDoClick:t[2]||(t[2]=t=>e._onLoadingMore("click")),zConfig:e.zLoadMoreConfig},null,8,["zConfig"]))],64))]),_:3},8,["style"])):w("",!0),e.useVirtualList?(g(),u(a,{key:3,class:"zp-virtual-placeholder",style:S([{height:e.virtualPlaceholderBottomHeight+"px"}])},null,8,["style"])):w("",!0),e.showLoadingMoreDefault?A(e.$slots,"loadingMoreDefault",{key:4},void 0,!0):e.showLoadingMoreLoading?A(e.$slots,"loadingMoreLoading",{key:5},void 0,!0):e.showLoadingMoreNoMore?A(e.$slots,"loadingMoreNoMore",{key:6},void 0,!0):e.showLoadingMoreFail?A(e.$slots,"loadingMoreFail",{key:7},void 0,!0):e.showLoadingMoreCustom?(g(),u(h,{key:8,onDoClick:t[3]||(t[3]=t=>e._onLoadingMore("click")),zConfig:e.zLoadMoreConfig},null,8,["zConfig"])):w("",!0),e.safeAreaInsetBottom&&e.useSafeAreaPlaceholder&&!e.useChatRecordMode?(g(),u(a,{key:9,class:"zp-safe-area-placeholder",style:S([{height:e.safeAreaBottom+"px"}])},null,8,["style"])):w("",!0)]),_:3},8,["style"]),e.showEmpty?(g(),u(a,{key:1,class:T({"zp-empty-view":!0,"zp-empty-view-center":e.emptyViewCenter}),style:S([e.emptyViewSuperStyle,e.chatRecordRotateStyle])},{default:f(()=>[e.zSlots.empty?A(e.$slots,"empty",{key:0,isLoadFailed:e.isLoadFailed},void 0,!0):(g(),u(n,{key:1,emptyViewImg:e.finalEmptyViewImg,emptyViewText:e.finalEmptyViewText,showEmptyViewReload:e.finalShowEmptyViewReload,emptyViewReloadText:e.finalEmptyViewReloadText,isLoadFailed:e.isLoadFailed,emptyViewStyle:e.emptyViewStyle,emptyViewTitleStyle:e.emptyViewTitleStyle,emptyViewImgStyle:e.emptyViewImgStyle,emptyViewReloadStyle:e.emptyViewReloadStyle,emptyViewZIndex:e.emptyViewZIndex,emptyViewFixed:e.emptyViewFixed,unit:e.unit,onReload:e._emptyViewReload,onViewClick:e._emptyViewClick},null,8,["emptyViewImg","emptyViewText","showEmptyViewReload","emptyViewReloadText","isLoadFailed","emptyViewStyle","emptyViewTitleStyle","emptyViewImgStyle","emptyViewReloadStyle","emptyViewZIndex","emptyViewFixed","unit","onReload","onViewClick"]))]),_:3},8,["class","style"])):w("",!0)]),_:3},8,["style"])]),_:3},8,["style","change:prop","prop","data-refresherThreshold","data-refresherF2Enabled","data-refresherF2Threshold","data-isIos","data-loading","data-useChatRecordMode","data-refresherEnabled","data-useCustomRefresher","data-pageScrollTop","data-scrollTop","data-refresherMaxAngle","data-refresherNoTransform","data-refresherAecc","data-usePageScroll","data-watchTouchDirectionChange","data-oldIsTouchmoving","data-refresherOutRate","data-refresherPullRate","data-hasTouchmove","change:renderPropIsIosAndH5","renderPropIsIosAndH5"])]),_:3},8,["onTouchstart","onTouchmove","onTouchend","onTouchcancel","onMousedown","onMousemove","onMouseup","onMouseleave"])]),_:3},8,["class","style","scroll-top","scroll-x","scroll-y","enable-back-to-top","show-scrollbar","scroll-with-animation","scroll-into-view","lower-threshold","refresher-enabled","refresher-threshold","refresher-default-style","refresher-background","refresher-triggered","onScroll","onScrolltolower","onScrolltoupper","onRefresherrestore"])]),_:3},8,["class","style"]),e.zSlots.right?(g(),u(a,{key:1,class:T({"zp-page-right":!0,"zp-absoulte zp-right":e.finalIsOldWebView})},{default:f(()=>[A(e.$slots,"right",{},void 0,!0)]),_:3},8,["class"])):w("",!0)]),_:3},8,["class","style"]),p(a,{class:"zp-page-bottom-container",style:S({background:e.bottomBgColor})},{default:f(()=>[!e.usePageScroll&&e.zSlots.bottom?A(e.$slots,"bottom",{key:0},void 0,!0):e.usePageScroll&&e.zSlots.bottom?(g(),u(a,{key:1,class:"zp-page-bottom",onTouchmove:t[5]||(t[5]=E(()=>{},["stop","prevent"])),style:S([{bottom:`${e.windowBottom}px`}])},{default:f(()=>[A(e.$slots,"bottom",{},void 0,!0)]),_:3},8,["style"])):w("",!0),e.useChatRecordMode&&e.autoAdjustPositionWhenChat?(g(),M(b,{key:2},[p(a,{style:S([{height:e.chatRecordModeSafeAreaBottom+"px"}])},null,8,["style"]),p(a,{class:"zp-page-bottom-keyboard-placeholder-animate",style:S([{height:e.keyboardHeight+"px"}])},null,8,["style"])],64)):w("",!0)]),_:3},8,["style"]),e.showBackToTopClass?(g(),u(a,{key:4,class:T(e.finalBackToTopClass),style:S([e.finalBackToTopStyle]),onClick:E(e._backToTopClick,["stop"])},{default:f(()=>[e.zSlots.backToTop?A(e.$slots,"backToTop",{key:0},void 0,!0):(g(),u(c,{key:1,class:T(["zp-back-to-top-img",{"zp-back-to-top-img-inversion":e.useChatRecordMode&&!e.backToTopImg.length}]),src:e.backToTopImg.length?e.backToTopImg:e.base64BackToTop},null,8,["class","src"]))]),_:3},8,["class","style","onClick"])):w("",!0),e.showLoading&&e.zSlots.loading&&e.loadingFullFixed?(g(),u(a,{key:5,class:"zp-loading-fixed"},{default:f(()=>[A(e.$slots,"loading",{},void 0,!0)]),_:3})):w("",!0)]),_:3},8,["class","style"])}],["__scopeId","data-v-38df3cf6"]]);export{st as _};
