import{a as e,bh as o,bp as t,bN as a,bf as l,a9 as n,bO as s,bP as i}from"./index-D9qffpGI.js";function c(c,r){return m=this,u=null,f=function*(){const m=e();if(c)if(m.isIos)yield o({title:t.global.t("common.prompt.downloading")+"..."}),a({url:c,success:function(e){s({tempFilePath:e.tempFilePath,success:function(e){i({filePath:e.savedFilePath,showMenu:!0,success:function(){},fail:e=>{}})},fail(e){}})},fail(e){n({icon:"none",title:t.global.t("common.prompt.save-failure")})},complete(){l()}});else try{const e=plus.downloader.createDownload(c,{method:"GET",timeout:6e4,retry:0,filename:`file:///storage/emulated/0/Download/zhws/${r}`},function(e,o){if(l(),200===o){const o=plus.io.convertLocalFileSystemURL(e.filename);n({title:`${t.global.t("common.prompt.save-successfully")},${t.global.t("common.saved-as")}${o}`,mask:!0,duration:3e3,icon:"none"})}else n({icon:"none",title:t.global.t("common.prompt.save-failure")}),plus.downloader.clear()});yield o({icon:"none",title:t.global.t("common.prompt.downloading")+"..."}),e.start()}catch(u){}},new Promise((e,o)=>{var t=e=>{try{l(f.next(e))}catch(t){o(t)}},a=e=>{try{l(f.throw(e))}catch(t){o(t)}},l=o=>o.done?e(o.value):Promise.resolve(o.value).then(t,a);l((f=f.apply(m,u)).next())});var m,u,f}export{c as d};
